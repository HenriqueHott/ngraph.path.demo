{"version":3,"sources":["webpack:///static/js/app.0909d77a9f567b9c9812.js","webpack:///../yaqt/index.js","webpack:///./src/appModel.js","webpack:///./src/bus.js","webpack:////Users/anvaka/projects/ngraph/modules/ngraph.path/a-star/NodeHeap.js","webpack:///./src/BBox.js","webpack:////Users/anvaka/projects/ngraph/modules/ngraph.path/a-star/heuristics.js","webpack:////Users/anvaka/projects/ngraph/modules/ngraph.path/a-star/a-greedy-star.js","webpack:////Users/anvaka/projects/ngraph/modules/ngraph.path/a-star/nba/makeNBASearchStatePool.js","webpack:///./src/settings.js","webpack:////Users/anvaka/projects/ngraph/modules/ngraph.path/a-star/makeSearchStatePool.js","webpack:///./src/components/About.vue?c304","webpack:///../yaqt/lib/treeNode.js","webpack:///./src/lib/RouteHandleViewModel.js","webpack:///./src/App.vue?35a7","webpack:///../yaqt/lib/rectangularCheck.js","webpack:///./src/components/RoutePoint.vue?6cd1","webpack:///./src/main.js","webpack:///./src/App.vue?e3b1","webpack:///./src/lib/loadGraph.js","webpack:///./src/SVGContainer.js","webpack:////Users/anvaka/projects/ngraph/modules/ngraph.path/a-star/a-star.js","webpack:///About.vue","webpack:///./src/components/About.vue?66fe","webpack:////Users/anvaka/projects/ngraph/modules/ngraph.path/a-star/defaultSettings.js","webpack:///RoutePoint.vue","webpack:///./src/lib/Progress.js","webpack:///./src/components/RoutePoint.vue","webpack:////Users/anvaka/projects/ngraph/modules/ngraph.path/index.js","webpack:////Users/anvaka/projects/ngraph/modules/ngraph.path/a-star/nba/index.js","webpack:///../yaqt/lib/bounds.js","webpack:///./src/lib/request.js","webpack:///../yaqt/~/rafor/index.js","webpack:///App.vue"],"names":["webpackJsonp","/S+c","module","exports","__webpack_require__","createTree","visit","cb","root","getPointsAround","x","y","half","intersectCheck","rectangularCheck","indices","queryBounds","query","originalArray","init","points","verifyPointsInvariant","createRootNode","i","length","insert","initAsync","options","insertToRoot","element","progress","doneInternal","doneCallback","api","done","asyncFor","step","Error","getBounds","bounds","EmptyRegion","empty","Bounds","TreeNode","minX","Number","POSITIVE_INFINITY","minY","maxX","NEGATIVE_INFINITY","maxY","side","Math","max","pointsAround","0csq","updateStateFromQueryString","queryState","fromId","routeStart","pointId","toId","routeEnd","setCurrentSearchFromQueryState","updateRoute","updateSearchAlgorithm","setCurrentPathFinder","qs","set","settings","pathFinderSettings","selected","getRouteHandleUnderCursor","e","scene","transform","getTransform","scale","getPixelRatio","intersects","sceneX","sceneY","getGraphBBox","graphBBox","visible","pathInfo","svgPath","updateQueryString","start","window","performance","now","path","findPath","end","noPath","getSvgPath","stats","lastSearchTook","round","pathLength","getPathLength","pendingQueryStringUpdate","clearTimeout","setTimeout","get","totalLength","dataDistance","numberWithCommas","clearRoute","clear","handleSceneClick","setRoutePointFormEvent","routePointViewModel","hetTestTree","point","findNearestPoint","setFrom","loadPositions","graphName","graph","reset","loadGraph","then","setApplicationModelVariables","catch","setError","loaded","pathFinder","initHitTestTree","initPathfinders","graphNodeCount","getNodesCount","graphLinksCount","getLinksCount","bus","fire","loadedPoints","total","message","completed","treeReady","pathFindersLookup","a-greedy-star","npath","aGreedy","distance","heuristic","nba","astar-uni","aStar","dijkstra","pathFinderName","from","getNode","to","updateSelectedGraph","graphSettings","toString","replace","find","map","l","data","pt","index","toPoint","join","p","getGraph","maxDistanceToExplore","arguments","undefined","idx","sort","a","b","pointDistance","src","dx","dy","sqrt","Progress","RouteHandleViewModel","getSettings","onChange","14gb","eventify","31dX","NodeHeap","this","Array","isArray","compare","defaultCompare","setNodeId","noop","_down","prototype","push","item","_up","pop","top","peek","updateItem","pos","parent","current","halfLength","left","right","best","3Zuw","_interopRequireDefault","obj","__esModule","default","_classCallCheck2","_classCallCheck3","_createClass2","_createClass3","BBox","key","value","offset","xIn","yIn","rect","addPoint","bottom","otherBBox","5jmk","8a79","l2","l1","abs","CnY6","aStarBi","nonOrientedVisitor","otherNode","link","visitNode","orientedVisitor","currentOpener","BY_FROM","node","id","BY_TO","canExit","currentNode","opener","open","cameFrom","otherSearchState","nodeState","pool","createNewState","closed","potentialLMin","distanceToSource","lMin","minFrom","minTo","tentativeDistance","target","newFScore","fScore","currentSet","heapIndex","callVisitor","oriented","Map","openSetFrom","defaultSettings","compareFScore","setHeapIndex","openSetTo","startNode","endNode","forEachLinkedNode","pathOfNodes","aParent","bParent","unshift","NO_PATH","makeSearchStatePool","heuristics","DkjH","NBASearchState","p1","p2","g1","g2","f1","f2","h1","h2","makeNBASearchStatePool","currentInCache","cached","nodeCache","F5sT","getAvailableGraphs","getAvailablePathfinders","graphs","name","algorithms","GKTj","NodeSearchState","JGX7","__webpack_exports__","render","_vm","_h","$createElement","_c","_self","staticClass","on","click","$event","preventDefault","close","_v","attrs","href","_m","staticRenderFns","esExports","L7cz","nw","ne","sw","se","items","getChild","subdivide","quarter","array","depth","quadIdx","results","sourceArray","contains","LnN7","pointChangedCallback","beingDragged","r","pointChanged","onMouseMove","stopPropagation","clientX","clientY","touches","mainTouch","identifier","touchId","s","getSceneCoordinate","self","onMouseUp","touch","unsubscribe","document","removeEventListener","addEventListener","capture","passive","graphNode","M93x","injectStyle","ssrContext","Object","defineProperty","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_App_vue__","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_App_vue___default","n","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_2893f493_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_node_modules_vue_loader_lib_selector_type_template_index_0_App_vue__","normalizeComponent","__vue_styles__","Component","MGIa","N1rF","screenScale","fill","stroke","stroke-width","strokeWidth","font-size","fontSize","text-anchor","textY","_s","symbol","NHnr","_vue","_vue2","_App","_App2","config","productionTip","el","template","components","App","R0YH","ref","webGLEnabled","_e","d","errorMessage","errorDetails","getHelpText","helpVisible","viewBox","detailsVisible","pathText","directives","rawName","expression","change","$$selectedVal","filter","call","o","_value","multiple","_l","algorithm","domProps","title","graphNameTitle","updateGraph","aboutVisible","frameborder","allowfullscreen","S4H+","fileName","setPositions","buffer","Int32Array","console","log","initNodes","time","_promise2","resolve","addPointToGraph","pointsReady","timeEnd","nodeId","floor","addNode","loadLinks","request","endpoint","responseType","reportProgress","setLinks","links","addLinkToGraph","linksReady","fromShifted","addLink","percent","createGraph","_promise","SRj4","transformsAreSame","world","ours","_getPrototypeOf","_getPrototypeOf2","_possibleConstructorReturn2","_possibleConstructorReturn3","_inherits2","_inherits3","wgl","SVGContainer","_wgl$Element","groupElement","drawCallback","_this","__proto__","g","worldTransform","pixelRatio","setAttributeNS","Element","U0jl","aStarPathSearch","visitNeighbour","openSet","goalReached","reconstructPath","searchState","targetNode","Zs8U","mounted","closeHandler","keyCode","beforeDestroy","methods","$emit","c27y","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_About_vue__","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_About_vue___default","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_654b3992_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_node_modules_vue_loader_lib_selector_type_template_index_0_About_vue__","e0RS","kSRG","blindHeuristic","constantDistance","nodeSearchState","compareF1Score","compareF2Score","setH1","setH2","freeze","nEty","props","String","type","computed","pNOi","details","qEFR","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_RoutePoint_vue__","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_RoutePoint_vue___default","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_4945ea12_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_node_modules_vue_loader_lib_selector_type_template_index_0_RoutePoint_vue__","r0CE","sA0F","visitN1","open1Set","potentialMin","minNode","visitN2","open2Set","visitN2Oriented","visitN1Oriented","forwardVisitor","reverseVisitor","quitFast","child","uIdY","width","height","centerX","centerY","vccH","url","download","reject","updateProgress","lengthComputable","transferComplete","req","status","response","JSON","parse","transferFailed","transferCanceled","XMLHttpRequest","send","wmlL","visitCallback","processSubset","finish","min","pointsPerLoopCycle","timeStart","Date","elapsed","maxTimeMS","probeElements","xJD8","_appModel","_appModel2","_SVGContainer","_SVGContainer2","_RoutePoint","_RoutePoint2","_About","_About2","RoutePoint","About","isWebGLEnabled","$refs","canvas","createScene","off","ensurePreviousSceneDestroyed","dispose","unsubscribeMoveEvents","svgConntainer","svg","querySelector","updateSVGElements","bind","appendChild","setClearColor","bbox","initialSceneSize","setViewBox","linksCount","lines","WireCollection","color","forEachLink","add","onMouseMoveOverScene","onSceneClick","boundMouseDown","handleMouseDown","body","foundPath","changedTouches","handleUnderCursor","startDragging","handle","prevHandle","style","cursor"],"mappings":"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","file":"static/js/app.0909d77a9f567b9c9812.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ \"/S+c\":\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Bounds = __webpack_require__(\"uIdY\");\nvar TreeNode = __webpack_require__(\"L7cz\");\nvar EmptyRegion = new Bounds();\nvar rectangularCheck = __webpack_require__(\"MGIa\");\nvar asyncFor = __webpack_require__(\"wmlL\");\n\nmodule.exports = createTree;\n\nfunction createTree() {\n  var queryBounds = new Bounds();\n  var root;\n  var originalArray;\n  var api = {\n\n    /**\n     * Synchronous version of `initAsync()`. Should only be used for small\n     * trees (less than 50-70k of points).\n     *\n     * @param {number[]} points array of points for which we are building the\n     * tree. Flat sequence of (x, y) coordinates. Array length should be\n     * multiple of 2.\n     */\n    init: init,\n\n    /**\n     * Initializes tree asynchronously. Very useful when you have millions\n     * of points and do not want to block rendering thread for too long.\n     *\n     * @param {number[]} points array of points for which we are building the\n     * tree. Flat sequence of (x, y) coordinates. Array length should be\n     * multiple of 2.\n     *\n     * @param {Function=} doneCallback called when tree is initialized. The\n     * callback will be called with single argument which represent current\n     * tree.\n     */\n    initAsync: initAsync,\n    bounds: getBounds,\n    pointsAround: getPointsAround,\n    visit: visit\n  };\n\n  return api;\n\n  function visit(cb) {\n    return root.visit(cb);\n  }\n\n  function getPointsAround(x, y, half, intersectCheck) {\n    if (typeof intersectCheck !== 'function') {\n      intersectCheck = rectangularCheck;\n    }\n    var indices = [];\n    queryBounds.x = x;\n    queryBounds.y = y;\n    queryBounds.half = half;\n    root.query(queryBounds, indices, originalArray, intersectCheck);\n    return indices;\n  }\n\n  function init(points) {\n    verifyPointsInvariant(points);\n\n    originalArray = points;\n    root = createRootNode(points);\n    for (var i = 0; i < points.length; i += 2) {\n      root.insert(i, originalArray);\n    }\n  }\n\n  function initAsync(points, options) {\n    verifyPointsInvariant(points);\n\n    var doneCallback = options && options.done;\n    var progress = options && options.progress;\n\n    root = createRootNode(points);\n    originalArray = points;\n    asyncFor(points, insertToRoot, doneInternal, { step: 2 });\n\n    function insertToRoot(element, i) {\n      root.insert(i, points, 0);\n      if (progress) progress(i, points.length);\n    }\n\n    function doneInternal() {\n      if (typeof doneCallback === 'function') {\n        doneCallback(api);\n      }\n    }\n  }\n\n  function verifyPointsInvariant(points) {\n    if (!points) throw new Error('Points array is required for quadtree to work');\n    if (typeof points.length !== 'number') throw new Error('Points should be array-like object');\n    if (points.length % 2 !== 0) throw new Error('Points array should consist of series of x,y coordinates and be multiple of 2');\n  }\n\n\n  function getBounds() {\n    if (!root) return EmptyRegion;\n    return root.bounds;\n  }\n\n  function createRootNode(points) {\n    // Edge case deserves empty region:\n    if (points.length === 0) {\n      var empty = new Bounds();\n      return new TreeNode(empty);\n    }\n\n    // Otherwise let's figure out how big should be the root region\n    var minX = Number.POSITIVE_INFINITY;\n    var minY = Number.POSITIVE_INFINITY;\n    var maxX = Number.NEGATIVE_INFINITY;\n    var maxY = Number.NEGATIVE_INFINITY;\n    for (var i = 0; i < points.length; i += 2) {\n      var x = points[i], y = points[i + 1];\n      if (x < minX) minX = x;\n      if (x > maxX) maxX = x;\n      if (y < minY) minY = y;\n      if (y > maxY) maxY = y;\n    }\n\n    // Make bounds square:\n    var side = Math.max(maxX - minX, maxY - minY);\n    // since we need to have both sides inside the area, let's artificially\n    // grow the root region:\n    side += 2;\n    minX -= 1;\n    minY -= 1;\n    var half = side/2;\n\n    var bounds = new Bounds(minX + half, minY + half, half);\n    return new TreeNode(bounds);\n  }\n}\n\n\n/***/ }),\n\n/***/ \"0csq\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/**\n * This is the main application model.\n */\nvar createTree = __webpack_require__(\"/S+c\");\nvar npath = __webpack_require__(\"r0CE\"); // the pathfinders\n\nvar loadGraph = __webpack_require__(\"S4H+\"); // loads graph asynchronously\nvar Progress = __webpack_require__(\"pNOi\"); // notifies UI about loading progress\n\n// This is a state for two dots A and B on the UI\nvar RouteHandleViewModel = __webpack_require__(\"LnN7\");\n\n// We use a few options in the UI (available path finders, available graphs)\nvar getSettings = __webpack_require__(\"F5sT\");\n\n// Some state is shared in the query string (start/end of the route)\nvar queryState = __webpack_require__(\"3zJd\");\n\n// And this is how the state communicates asynchronously with App.vue\nvar bus = __webpack_require__(\"14gb\");\n\n// Now that we are done with imports, lets initialize the state.\n\n// First of all, read what we currently have in the query string.\nvar qs = queryState({\n  graph: 'amsterdam-roads'\n});\n\nqs.onChange(updateStateFromQueryString);\n\nvar graph = void 0; // current graph\nvar graphBBox = void 0; // current bounding box for a graph\nvar hetTestTree = void 0; // this tree helps us find graph node under cursor\nvar pathFinder = void 0; // currently selected pathfinder\nvar pathFindersLookup = void 0; // initialized after we load graph\n\nvar pendingQueryStringUpdate = 0; // Used to throttle query string updates.\n\nvar routeStart = new RouteHandleViewModel(updateRoute, findNearestPoint);\nvar routeEnd = new RouteHandleViewModel(updateRoute, findNearestPoint);\n\nvar stats = {\n  visible: false,\n  lastSearchTook: 0,\n  pathLength: 0,\n  graphNodeCount: '',\n  graphLinksCount: ''\n};\n\nvar settings = getSettings(qs);\n\nvar api = {\n  loadPositions: loadPositions,\n\n  updateSearchAlgorithm: updateSearchAlgorithm,\n  updateSelectedGraph: updateSelectedGraph,\n\n  getGraph: getGraph,\n  getGraphBBox: getGraphBBox,\n\n  progress: new Progress(),\n  stats: stats,\n\n  routeStart: routeStart,\n  routeEnd: routeEnd,\n  pathInfo: {\n    svgPath: '',\n    noPath: false\n  },\n\n  handleSceneClick: handleSceneClick,\n  getRouteHandleUnderCursor: getRouteHandleUnderCursor,\n  clearRoute: clearRoute,\n\n  pathFinderSettings: settings.pathFinderSettings,\n  graphSettings: settings.graphSettings\n};\n\nmodule.exports = api;\n\n// The app model is ready at this point.\n\nfunction updateStateFromQueryString(queryState) {\n  var searchChanged = queryState.fromId !== routeStart.pointId || queryState.toId !== routeEnd.pointId;\n\n  if (searchChanged) {\n    setCurrentSearchFromQueryState();\n    updateRoute();\n  }\n}\n\n/**\n * This method sets a new pathfinder, according to currently selected\n * drop down option from `pathFinderSettings`\n */\nfunction updateSearchAlgorithm() {\n  setCurrentPathFinder();\n  qs.set('finder', settings.pathFinderSettings.selected);\n  updateRoute();\n}\n\nfunction getRouteHandleUnderCursor(e, scene) {\n  var transform = scene.getTransform();\n  var scale = transform.scale / scene.getPixelRatio();\n\n  if (routeStart.intersects(e.sceneX, e.sceneY, scale)) {\n    return routeStart;\n  }\n  if (routeEnd.intersects(e.sceneX, e.sceneY, scale)) {\n    return routeEnd;\n  }\n}\n\nfunction getGraphBBox() {\n  return graphBBox;\n}\n\nfunction updateRoute() {\n  if (!(routeStart.visible && routeEnd.visible)) {\n    api.pathInfo.svgPath = '';\n    return;\n  }\n\n  var fromId = routeStart.pointId;\n  var toId = routeEnd.pointId;\n  updateQueryString();\n\n  var start = window.performance.now();\n  var path = findPath(fromId, toId);\n  var end = window.performance.now() - start;\n\n  api.pathInfo.noPath = path.length === 0;\n  api.pathInfo.svgPath = getSvgPath(path);\n\n  stats.lastSearchTook = Math.round(end * 100) / 100 + 'ms';\n  stats.pathLength = getPathLength(path);\n  stats.visible = true;\n}\n\nfunction updateQueryString() {\n  if (pendingQueryStringUpdate) {\n    // iOS doesn't like when we update query string too often.\n    // need to throttle\n    clearTimeout(pendingQueryStringUpdate);\n    pendingQueryStringUpdate = 0;\n  }\n\n  pendingQueryStringUpdate = setTimeout(function () {\n    pendingQueryStringUpdate = 0;\n    if (!(routeStart.visible && routeEnd.visible)) return;\n\n    var fromId = routeStart.pointId;\n    var toId = routeEnd.pointId;\n    if (qs.get('fromId') != fromId) {\n      qs.set('fromId', fromId);\n    }\n    if (qs.get('toId') !== toId) {\n      qs.set('toId', toId);\n    }\n  }, 400);\n}\n\nfunction getPathLength(path) {\n  var totalLength = 0;\n  for (var i = 1; i < path.length; ++i) {\n    totalLength += dataDistance(path[i - 1], path[i]);\n  }\n  return numberWithCommas(Math.round(totalLength));\n}\n\nfunction clearRoute() {\n  routeStart.clear();\n  routeEnd.clear();\n  qs.set({\n    fromId: -1,\n    toId: -1\n  });\n}\n\nfunction handleSceneClick(e) {\n  if (!routeStart.visible) {\n    setRoutePointFormEvent(e, routeStart);\n  } else if (!routeEnd.visible) {\n    setRoutePointFormEvent(e, routeEnd);\n  }\n}\n\nfunction setRoutePointFormEvent(e, routePointViewModel) {\n  if (!hetTestTree) return; // we are not initialized yet.\n\n  var point = findNearestPoint(e.sceneX, e.sceneY);\n  if (!point) throw new Error('Point should be defined at this moment');\n\n  routePointViewModel.setFrom(point);\n}\n\nfunction loadPositions() {\n  var graphName = qs.get('graph');\n  hetTestTree = null;\n  graph = null;\n  stats.visible = false;\n  api.progress.reset();\n\n  loadGraph(graphName, api.progress).then(setApplicationModelVariables).catch(function (e) {\n    api.progress.setError('Could not load the graph', e);\n  });\n}\n\nfunction setApplicationModelVariables(loaded) {\n  graph = loaded.graph;\n  graphBBox = loaded.graphBBox;\n  pathFinder = null;\n\n  initHitTestTree(loaded.points);\n  initPathfinders();\n\n  stats.graphNodeCount = numberWithCommas(graph.getNodesCount());\n  stats.graphLinksCount = numberWithCommas(graph.getLinksCount());\n  bus.fire('graph-loaded');\n  setTimeout(function () {\n    // in case if we have path in the query string\n    updateRoute();\n  }, 0);\n}\n\nfunction initHitTestTree(loadedPoints) {\n  hetTestTree = createTree();\n  hetTestTree.initAsync(loadedPoints, {\n    progress: function progress(i, total) {\n      if (i % 500 !== 0) return;\n\n      api.progress.message = 'Initializing tree for point & click';\n      api.progress.completed = Math.round(100 * i / total) + '%';\n    },\n    done: function done() {\n      api.progress.treeReady = true;\n    }\n  });\n}\n\nfunction initPathfinders() {\n  pathFindersLookup = {\n    'a-greedy-star': npath.aGreedy(graph, {\n      distance: distance,\n      heuristic: distance\n    }),\n    'nba': npath.nba(graph, {\n      distance: distance,\n      heuristic: distance\n    }),\n    'astar-uni': npath.aStar(graph, {\n      distance: distance,\n      heuristic: distance\n    }),\n    'dijkstra': npath.aStar(graph, {\n      distance: distance\n    })\n  };\n\n  setCurrentPathFinder();\n  setCurrentSearchFromQueryState();\n}\n\nfunction setCurrentPathFinder() {\n  var pathFinderName = settings.pathFinderSettings.selected;\n  pathFinder = pathFindersLookup[pathFinderName];\n  if (!pathFinder) {\n    throw new Error('Cannot find pathfinder ' + pathFinderName);\n  }\n}\n\nfunction setCurrentSearchFromQueryState() {\n  if (!graph) return;\n\n  var fromId = qs.get('fromId');\n  var toId = qs.get('toId');\n  var from = graph.getNode(fromId);\n  var to = graph.getNode(toId);\n  if (from) routeStart.setFrom(from);\n  if (to) routeEnd.setFrom(to);\n}\n\nfunction updateSelectedGraph() {\n  qs.set({\n    graph: settings.graphSettings.selected,\n    fromId: -1,\n    toId: -1\n  });\n\n  loadPositions();\n  clearRoute();\n}\n\nfunction numberWithCommas(x) {\n  return x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n}\n\nfunction findPath(fromId, toId) {\n  return pathFinder.find(fromId, toId).map(function (l) {\n    return l.data;\n  });\n}\n\nfunction getSvgPath(points) {\n  if (points.length < 1) return '';\n\n  return points.map(function (pt, index) {\n    var prefix = index === 0 ? 'M' : '';\n    return prefix + toPoint(pt);\n  }).join(' ');\n}\n\nfunction toPoint(p) {\n  return p.x + ',' + p.y;\n}\n\nfunction getGraph() {\n  return graph;\n}\n\nfunction findNearestPoint(x, y) {\n  var maxDistanceToExplore = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 2000;\n\n  if (!hetTestTree) return;\n\n  var points = hetTestTree.pointsAround(x, y, maxDistanceToExplore).map(function (idx) {\n    return graph.getNode(idx / 2);\n  }).sort(function (a, b) {\n    var da = pointDistance(a.data, x, y);\n    var db = pointDistance(b.data, x, y);\n    return da - db;\n  });\n\n  if (points.length > 0) {\n    return points[0];\n  } else {\n    // keep trying.\n    return findNearestPoint(x, y, maxDistanceToExplore * 2);\n  }\n}\n\nfunction pointDistance(src, x, y) {\n  var dx = src.x - x;\n  var dy = src.y - y;\n  return Math.sqrt(dx * dx + dy * dy);\n}\n\nfunction distance(a, b) {\n  return dataDistance(a.data, b.data);\n}\n\nfunction dataDistance(a, b) {\n  var dx = a.x - b.x;\n  var dy = a.y - b.y;\n\n  return Math.sqrt(dx * dx + dy * dy);\n}\n\n/***/ }),\n\n/***/ \"14gb\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar eventify = __webpack_require__(\"puH/\");\nvar bus = eventify({});\n\nmodule.exports = bus;\n\n/***/ }),\n\n/***/ \"31dX\":\n/***/ (function(module, exports) {\n\n/**\n * Based on https://github.com/mourner/tinyqueue\n * Copyright (c) 2017, Vladimir Agafonkin https://github.com/mourner/tinyqueue/blob/master/LICENSE\n * \n * Adapted for PathFinding needs by @anvaka\n * Copyright (c) 2017, Andrei Kashcha\n */\nmodule.exports = NodeHeap;\n\nfunction NodeHeap(data, options) {\n  if (!(this instanceof NodeHeap)) return new NodeHeap(data, options);\n\n  if (!Array.isArray(data)) {\n    // assume first argument is our config object;\n    options = data;\n    data = [];\n  }\n\n  options = options || {};\n\n  this.data = data || [];\n  this.length = this.data.length;\n  this.compare = options.compare || defaultCompare;\n  this.setNodeId = options.setNodeId || noop;\n\n  if (this.length > 0) {\n    for (var i = (this.length >> 1); i >= 0; i--) this._down(i);\n  }\n\n  if (options.setNodeId) {\n    for (var i = 0; i < this.length; ++i) {\n      this.setNodeId(this.data[i], i);\n    }\n  }\n}\n\nfunction noop() {}\n\nfunction defaultCompare(a, b) {\n  return a - b;\n}\n\nNodeHeap.prototype = {\n\n  push: function (item) {\n    this.data.push(item);\n    this.setNodeId(item, this.length);\n    this.length++;\n    this._up(this.length - 1);\n  },\n\n  pop: function () {\n    if (this.length === 0) return undefined;\n\n    var top = this.data[0];\n    this.length--;\n\n    if (this.length > 0) {\n      this.data[0] = this.data[this.length];\n      this.setNodeId(this.data[0], 0);\n      this._down(0);\n    }\n    this.data.pop();\n\n    return top;\n  },\n\n  peek: function () {\n    return this.data[0];\n  },\n\n  updateItem: function (pos) {\n    this._down(pos);\n    this._up(pos);\n  },\n\n  _up: function (pos) {\n    var data = this.data;\n    var compare = this.compare;\n    var setNodeId = this.setNodeId;\n    var item = data[pos];\n\n    while (pos > 0) {\n      var parent = (pos - 1) >> 1;\n      var current = data[parent];\n      if (compare(item, current) >= 0) break;\n        data[pos] = current;\n\n       setNodeId(current, pos);\n       pos = parent;\n    }\n\n    data[pos] = item;\n    setNodeId(item, pos);\n  },\n\n  _down: function (pos) {\n    var data = this.data;\n    var compare = this.compare;\n    var halfLength = this.length >> 1;\n    var item = data[pos];\n    var setNodeId = this.setNodeId;\n\n    while (pos < halfLength) {\n      var left = (pos << 1) + 1;\n      var right = left + 1;\n      var best = data[left];\n\n      if (right < this.length && compare(data[right], best) < 0) {\n        left = right;\n        best = data[right];\n      }\n      if (compare(best, item) >= 0) break;\n\n      data[pos] = best;\n      setNodeId(best, pos);\n      pos = left;\n    }\n\n    data[pos] = item;\n    setNodeId(item, pos);\n  }\n};\n\n/***/ }),\n\n/***/ \"3Zuw\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _classCallCheck2 = __webpack_require__(\"Zrlr\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(\"wxAW\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar BBox = function () {\n  function BBox() {\n    (0, _classCallCheck3.default)(this, BBox);\n\n    this.minX = Number.POSITIVE_INFINITY;\n    this.minY = Number.POSITIVE_INFINITY;\n    this.maxX = Number.NEGATIVE_INFINITY;\n    this.maxY = Number.NEGATIVE_INFINITY;\n  }\n\n  (0, _createClass3.default)(BBox, [{\n    key: 'growBy',\n    value: function growBy(offset) {\n      this.minX -= offset;\n      this.minY -= offset;\n      this.maxX += offset;\n      this.maxY += offset;\n    }\n  }, {\n    key: 'addPoint',\n    value: function addPoint(xIn, yIn) {\n      if (xIn === undefined) throw new Error('Point is not defined');\n      var x = xIn;\n      var y = yIn;\n      if (y === undefined) {\n        // xIn is a point object\n        x = xIn.x;\n        y = xIn.y;\n      }\n\n      if (x < this.minX) this.minX = x;\n      if (x > this.maxX) this.maxX = x;\n      if (y < this.minY) this.minY = y;\n      if (y > this.maxY) this.maxY = y;\n    }\n  }, {\n    key: 'addRect',\n    value: function addRect(rect) {\n      if (!rect) throw new Error('rect is not defined');\n      this.addPoint(rect.left, rect.top);\n      this.addPoint(rect.right, rect.top);\n      this.addPoint(rect.left, rect.bottom);\n      this.addPoint(rect.right, rect.bottom);\n    }\n  }, {\n    key: 'merge',\n    value: function merge(otherBBox) {\n      if (otherBBox.minX < this.minX) this.minX = otherBBox.minX;\n      if (otherBBox.minY < this.minY) this.minY = otherBBox.minY;\n      if (otherBBox.maxX > this.maxX) this.maxX = otherBBox.maxX;\n      if (otherBBox.maxY > this.maxY) this.maxY = otherBBox.maxY;\n    }\n  }, {\n    key: 'left',\n    get: function get() {\n      return this.minX;\n    }\n  }, {\n    key: 'top',\n    get: function get() {\n      return this.minY;\n    }\n  }, {\n    key: 'right',\n    get: function get() {\n      return this.maxX;\n    }\n  }, {\n    key: 'bottom',\n    get: function get() {\n      return this.maxY;\n    }\n  }, {\n    key: 'width',\n    get: function get() {\n      return this.maxX - this.minX;\n    }\n  }, {\n    key: 'height',\n    get: function get() {\n      return this.maxY - this.minY;\n    }\n  }, {\n    key: 'cx',\n    get: function get() {\n      return (this.minX + this.maxX) / 2;\n    }\n  }, {\n    key: 'cy',\n    get: function get() {\n      return (this.minY + this.maxY) / 2;\n    }\n  }]);\n  return BBox;\n}();\n\nmodule.exports = BBox;\n\n/***/ }),\n\n/***/ \"5jmk\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"8a79\":\n/***/ (function(module, exports) {\n\nmodule.exports = {\n  l2: l2,\n  l1: l1\n};\n\n/**\n * Euclid distance (l2 norm);\n * \n * @param {*} a \n * @param {*} b \n */\nfunction l2(a, b) {\n  var dx = a.x - b.x;\n  var dy = a.y - b.y;\n  return Math.sqrt(dx * dx + dy * dy);\n}\n\n/**\n * Manhattan distance (l1 norm);\n * @param {*} a \n * @param {*} b \n */\nfunction l1(a, b) {\n  var dx = a.x - b.x;\n  var dy = a.y - b.y;\n  return Math.abs(dx) + Math.abs(dy);\n}\n\n\n/***/ }),\n\n/***/ \"CnY6\":\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n * Performs suboptimal, greed A Star path finding.\n * This finder does not necessary finds the shortest path. The path\n * that it finds is very close to the shortest one. It is very fast though.\n */\nmodule.exports = aStarBi;\n\nvar NodeHeap = __webpack_require__(\"31dX\");\nvar makeSearchStatePool = __webpack_require__(\"GKTj\");\nvar heuristics = __webpack_require__(\"8a79\");\nvar defaultSettings = __webpack_require__(\"kSRG\");\n\nvar BY_FROM = 1;\nvar BY_TO = 2;\nvar NO_PATH = defaultSettings.NO_PATH;\n\nmodule.exports.l2 = heuristics.l2;\nmodule.exports.l1 = heuristics.l1;\n\n/**\n * Creates a new instance of pathfinder. A pathfinder has just one method:\n * `find(fromId, toId)`, it may be extended in future.\n * \n * NOTE: Algorithm implemented in this code DOES NOT find optimal path.\n * Yet the path that it finds is always near optimal, and it finds it very fast.\n * \n * @param {ngraph.graph} graph instance. See https://github.com/anvaka/ngraph.graph\n * \n * @param {Object} options that configures search\n * @param {Function(a, b)} options.heuristic - a function that returns estimated distance between\n * nodes `a` and `b`.  Defaults function returns 0, which makes this search equivalent to Dijkstra search.\n * @param {Function(a, b)} options.distance - a function that returns actual distance between two\n * nodes `a` and `b`. By default this is set to return graph-theoretical distance (always 1);\n * \n * @returns {Object} A pathfinder with single method `find()`.\n */\nfunction aStarBi(graph, options) {\n  options = options || {};\n  // whether traversal should be considered over oriented graph.\n  var oriented = options.oriented;\n\n  var heuristic = options.heuristic;\n  if (!heuristic) heuristic = defaultSettings.heuristic;\n\n  var distance = options.distance;\n  if (!distance) distance = defaultSettings.distance;\n  var pool = makeSearchStatePool();\n\n  return {\n    find: find\n  };\n\n  function find(fromId, toId) {\n    // Not sure if we should return NO_PATH or throw. Throw seem to be more\n    // helpful to debug errors. So, throwing.\n    var from = graph.getNode(fromId);\n    if (!from) throw new Error('fromId is not defined in this graph: ' + fromId);\n    var to = graph.getNode(toId);\n    if (!to) throw new Error('toId is not defined in this graph: ' + toId);\n\n    if (from === to) return [from]; // trivial case.\n\n    pool.reset();\n\n    var callVisitor = oriented ? orientedVisitor : nonOrientedVisitor;\n\n    // Maps nodeId to NodeSearchState.\n    var nodeState = new Map();\n\n    var openSetFrom = new NodeHeap({\n      compare: defaultSettings.compareFScore,\n      setNodeId: defaultSettings.setHeapIndex\n    });\n\n    var openSetTo = new NodeHeap({\n      compare: defaultSettings.compareFScore,\n      setNodeId: defaultSettings.setHeapIndex\n    });\n\n\n    var startNode = pool.createNewState(from);\n    nodeState.set(fromId, startNode);\n\n    // For the first node, fScore is completely heuristic.\n    startNode.fScore = heuristic(from, to);\n    // The cost of going from start to start is zero.\n    startNode.distanceToSource = 0;\n    openSetFrom.push(startNode);\n    startNode.open = BY_FROM;\n\n    var endNode = pool.createNewState(to);\n    endNode.fScore = heuristic(to, from);\n    endNode.distanceToSource = 0;\n    openSetTo.push(endNode);\n    endNode.open = BY_TO;\n\n    // Cost of the best solution found so far. Used for accurate termination\n    var lMin = Number.POSITIVE_INFINITY;\n    var minFrom;\n    var minTo;\n\n    var currentSet = openSetFrom;\n    var currentOpener = BY_FROM;\n\n    while (openSetFrom.length > 0 && openSetTo.length > 0) {\n      if (openSetFrom.length < openSetTo.length) {\n        // we pick a set with less elements\n        currentOpener = BY_FROM;\n        currentSet = openSetFrom;\n      } else {\n        currentOpener = BY_TO;\n        currentSet = openSetTo;\n      }\n\n      var current = currentSet.pop();\n\n      // no need to visit this node anymore\n      current.closed = true;\n\n      if (current.distanceToSource > lMin) continue;\n\n      graph.forEachLinkedNode(current.node.id, callVisitor);\n\n      if (minFrom && minTo) {\n        // This is not necessary the best path, but we are so greedy that we\n        // can't resist:\n        return reconstructBiDirectionalPath(minFrom, minTo);\n      }\n    }\n\n    return NO_PATH; // No path.\n\n    function nonOrientedVisitor(otherNode, link) {\n      return visitNode(otherNode, link, current);\n    }\n\n    function orientedVisitor(otherNode, link) {\n      // For oritned graphs we need to reverse graph, when traveling\n      // backwards. So, we use non-oriented ngraph's traversal, and \n      // filter link orientation here.\n      if (currentOpener === BY_FROM) {\n        if (link.fromId === current.node.id) return visitNode(otherNode, link, current)\n      } else if (currentOpener === BY_TO) {\n        if (link.toId === current.node.id) return visitNode(otherNode, link, current);\n      }\n    }\n\n    function canExit(currentNode) {\n      var opener = currentNode.open\n      if (opener && opener !== currentOpener) {\n        return true;\n      }\n\n      return false;\n    }\n\n    function reconstructBiDirectionalPath(a, b) {\n      var pathOfNodes = [];\n      var aParent = a;\n      while(aParent) {\n        pathOfNodes.push(aParent.node);\n        aParent = aParent.parent;\n      }\n      var bParent = b;\n      while (bParent) {\n        pathOfNodes.unshift(bParent.node);\n        bParent = bParent.parent\n      }\n      return pathOfNodes;\n    }\n\n    function visitNode(otherNode, link, cameFrom) {\n      var otherSearchState = nodeState.get(otherNode.id);\n      if (!otherSearchState) {\n        otherSearchState = pool.createNewState(otherNode);\n        nodeState.set(otherNode.id, otherSearchState);\n      }\n\n      if (otherSearchState.closed) {\n        // Already processed this node.\n        return;\n      }\n\n      if (canExit(otherSearchState, cameFrom)) {\n        // this node was opened by alternative opener. The sets intersect now,\n        // we found an optimal path, that goes through *this* node. However, there\n        // is no guarantee that this is the global optimal solution path.\n\n        var potentialLMin = otherSearchState.distanceToSource + cameFrom.distanceToSource;\n        if (potentialLMin < lMin) {\n          minFrom = otherSearchState;\n          minTo = cameFrom\n          lMin = potentialLMin;\n        }\n        // we are done with this node.\n        return;\n      }\n\n      var tentativeDistance = cameFrom.distanceToSource + distance(otherSearchState.node, cameFrom.node, link);\n\n      if (tentativeDistance >= otherSearchState.distanceToSource) {\n        // This would only make our path longer. Ignore this route.\n        return;\n      }\n\n      // Choose target based on current working set:\n      var target = (currentOpener === BY_FROM) ? to : from;\n      var newFScore = tentativeDistance + heuristic(otherSearchState.node, target);\n      if (newFScore >= lMin) {\n        // this can't be optimal path, as we have already found a shorter path.\n        return;\n      }\n      otherSearchState.fScore = newFScore;\n\n      if (otherSearchState.open === 0) {\n        // Remember this node in the current set\n        currentSet.push(otherSearchState);\n        currentSet.updateItem(otherSearchState.heapIndex);\n\n        otherSearchState.open = currentOpener;\n      }\n\n      // bingo! we found shorter path:\n      otherSearchState.parent = cameFrom;\n      otherSearchState.distanceToSource = tentativeDistance;\n    }\n  }\n}\n\n\n/***/ }),\n\n/***/ \"DkjH\":\n/***/ (function(module, exports) {\n\nmodule.exports = makeNBASearchStatePool;\n\n/**\n * Creates new instance of NBASearchState. The instance stores information\n * about search state, and is used by NBA* algorithm.\n *\n * @param {Object} node - original graph node\n */\nfunction NBASearchState(node) {\n  /**\n   * Original graph node.\n   */\n  this.node = node;\n\n  /**\n   * Parent of this node in forward search\n   */\n  this.p1 = null;\n\n  /**\n   * Parent of this node in reverse search\n   */\n  this.p2 = null;\n\n  /**\n   * If this is set to true, then the node was already processed\n   * and we should not touch it anymore.\n   */\n  this.closed = false;\n\n  /**\n   * Actual distance from this node to its parent in forward search\n   */\n  this.g1 = Number.POSITIVE_INFINITY;\n\n  /**\n   * Actual distance from this node to its parent in reverse search\n   */\n  this.g2 = Number.POSITIVE_INFINITY;\n\n\n  /**\n   * Underestimated distance from this node to the path-finding source.\n   */\n  this.f1 = Number.POSITIVE_INFINITY;\n\n  /**\n   * Underestimated distance from this node to the path-finding target.\n   */\n  this.f2 = Number.POSITIVE_INFINITY;\n\n  // used to reconstruct heap when fScore is updated. TODO: do I need them both?\n\n  /**\n   * Index of this node in the forward heap.\n   */\n  this.h1 = -1;\n\n  /**\n   * Index of this node in the reverse heap.\n   */\n  this.h2 = -1;\n}\n\n/**\n * As path-finding is memory-intensive process, we want to reduce pressure on\n * garbage collector. This class helps us to recycle path-finding nodes and significantly\n * reduces the search time (~20% faster than without it).\n */\nfunction makeNBASearchStatePool() {\n  var currentInCache = 0;\n  var nodeCache = [];\n\n  return {\n    /**\n     * Creates a new NBASearchState instance\n     */\n    createNewState: createNewState,\n\n    /**\n     * Marks all created instances available for recycling.\n     */\n    reset: reset\n  };\n\n  function reset() {\n    currentInCache = 0;\n  }\n\n  function createNewState(node) {\n    var cached = nodeCache[currentInCache];\n    if (cached) {\n      // TODO: This almost duplicates constructor code. Not sure if\n      // it would impact performance if I move this code into a function\n      cached.node = node;\n\n      // How we came to this node?\n      cached.p1 = null;\n      cached.p2 = null;\n\n      cached.closed = false;\n\n      cached.g1 = Number.POSITIVE_INFINITY;\n      cached.g2 = Number.POSITIVE_INFINITY;\n      cached.f1 = Number.POSITIVE_INFINITY;\n      cached.f2 = Number.POSITIVE_INFINITY;\n\n      // used to reconstruct heap when fScore is updated.\n      cached.h1 = -1;\n      cached.h2 = -1;\n    } else {\n      cached = new NBASearchState(node);\n      nodeCache[currentInCache] = cached;\n    }\n    currentInCache++;\n    return cached;\n  }\n}\n\n\n/***/ }),\n\n/***/ \"F5sT\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nmodule.exports = getSettings;\n\nfunction getSettings(qs) {\n  var graphSettings = getAvailableGraphs(qs);\n  var pathFinderSettings = getAvailablePathfinders(qs);\n\n  return {\n    graphSettings: graphSettings,\n    pathFinderSettings: pathFinderSettings\n  };\n}\n\nfunction getAvailableGraphs(qs) {\n  var graphs = [{\n    value: 'amsterdam-roads',\n    name: 'Amsterdam (76K edges, 1.1 MB)'\n  }, {\n    value: 'seattle-roads',\n    name: 'Seattle (173K edges, 2.4 MB)'\n  }, {\n    value: 'rome-roads',\n    name: 'Rome (258K edges, 3.8 MB)'\n  }, {\n    value: 'delhi-roads',\n    name: 'Delhi (280K edges, 3.9 MB)'\n  }, {\n    value: 'moscow-roads',\n    name: 'Moscow (451K edges, 6.5 MB)'\n  }, {\n    value: 'USA-road-d.NY',\n    name: 'New York (730K edges, 7.6 MB)'\n  }];\n\n  return {\n    selected: qs.get('graph'),\n    graphs: graphs\n  };\n}\n\nfunction getAvailablePathfinders(qs) {\n  return {\n    selected: qs.get('finder') || 'nba',\n    algorithms: [{\n      value: 'a-greedy-star',\n      name: 'Greedy A* (suboptimal)'\n    }, {\n      value: 'nba',\n      name: 'NBA*'\n    }, {\n      value: 'astar-uni',\n      name: 'Unidirectional A*'\n    }, {\n      value: 'dijkstra',\n      name: 'Dijkstra'\n    }]\n  };\n}\n\n/***/ }),\n\n/***/ \"GKTj\":\n/***/ (function(module, exports) {\n\n/**\n * This class represents a single search node in the exploration tree for\n * A* algorithm.\n * \n * @param {Object} node  original node in the graph\n */\nfunction NodeSearchState(node) {\n  this.node = node;\n\n  // How we came to this node?\n  this.parent = null;\n\n  this.closed = false;\n  this.open = 0;\n\n  this.distanceToSource = Number.POSITIVE_INFINITY;\n  // the f(n) = g(n) + h(n) value\n  this.fScore = Number.POSITIVE_INFINITY;\n\n  // used to reconstruct heap when fScore is updated.\n  this.heapIndex = -1;\n};\n\nfunction makeSearchStatePool() {\n  var currentInCache = 0;\n  var nodeCache = [];\n\n  return {\n    createNewState: createNewState,\n    reset: reset\n  };\n\n  function reset() {\n    currentInCache = 0;\n  }\n\n  function createNewState(node) {\n    var cached = nodeCache[currentInCache];\n    if (cached) {\n      // TODO: This almost duplicates constructor code. Not sure if\n      // it would impact performance if I move this code into a function\n      cached.node = node;\n      // How we came to this node?\n      cached.parent = null;\n\n      cached.closed = false;\n      cached.open = 0;\n\n      cached.distanceToSource = Number.POSITIVE_INFINITY;\n      // the f(n) = g(n) + h(n) value\n      cached.fScore = Number.POSITIVE_INFINITY;\n\n      // used to reconstruct heap when fScore is updated.\n      cached.heapIndex = -1;\n\n    } else {\n      cached = new NodeSearchState(node);\n      nodeCache[currentInCache] = cached;\n    }\n    currentInCache++;\n    return cached;\n  }\n}\nmodule.exports = makeSearchStatePool;\n\n/***/ }),\n\n/***/ \"JGX7\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"about\"},[_c('div',{staticClass:\"background absolute\",on:{\"click\":function($event){$event.preventDefault();_vm.close($event)}}}),_vm._v(\" \"),_c('div',{staticClass:\"content\"},[_c('h3',[_vm._v(\"ngraph.path \"),_c('a',{staticClass:\"close bold\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();_vm.close($event)}}},[_vm._v(\"close\")])]),_vm._v(\" \"),_vm._m(0),_c('p',[_vm._v(\"\\n      Don't use this website for actual navigation :).\\n    \")]),_vm._v(\" \"),_vm._m(1),_vm._v(\" \"),_vm._m(2),_vm._v(\" \"),_vm._m(3),_vm._v(\" \"),_vm._m(4),_vm._v(\" \"),_c('a',{staticClass:\"large-close bold\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();_vm.close($event)}}},[_vm._v(\"\\n      close\\n    \")])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"\\n      This website is a demo for the \"),_c('a',{staticClass:\"highlighted\",attrs:{\"href\":\"https://github.com/anvaka/ngraph.path\"}},[_vm._v(\"ngraph.path\")]),_vm._v(\"\\n      library. The library implements pathfinding algorithms for generic graphs (not limited to grids).\\n    \")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"My goal was to build a very fast library, that could help many developers\\n      find their paths. In my tests, the library showed great performance with median\\n      path finding speed \"),_c('span',{staticClass:\"bold\"},[_vm._v(\"34ms\")]),_vm._v(\" on \"),_c('span',{staticClass:\"bold\"},[_vm._v(\"733,844\")]),_vm._v(\" edges graph.\\n    \")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"I built the roads graph for this demo using amazing \"),_c('a',{staticClass:\"highlighted\",attrs:{\"href\":\"http://www.openstreetmap.org/\",\"target\":\"_blank\"}},[_vm._v(\"OpenStreetMap\")]),_vm._v(\".\\n    \")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ul',[_c('li',[_c('a',{staticClass:\"highlighted\",attrs:{\"href\":\"https://github.com/anvaka/ngraph.path\"}},[_vm._v(\"Learn more \")]),_vm._v(\" about this project on GitHub\\n      \")]),_c('li',[_vm._v(\"\\n      Stay tuned for updates on \"),_c('a',{staticClass:\"highlighted\",attrs:{\"href\":\"https://twitter.com/anvaka\"}},[_vm._v(\"Twitter.\")])]),_c('li',[_c('a',{staticClass:\"highlighted\",attrs:{\"href\":\"https://www.youtube.com/watch?v=hGeZuIEV6KU\"}},[_vm._v(\" Watch a video\")]),_vm._v(\" demo.\\n      \")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"With passion,\"),_c('br'),_vm._v(\" Anvaka\")])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"L7cz\":\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Bounds = __webpack_require__(\"uIdY\");\nvar MAX_ITEMS = 4;\nmodule.exports = TreeNode;\n\nfunction TreeNode(bounds) {\n  this.bounds = bounds;\n  this.nw = null;\n  this.ne = null;\n  this.sw = null;\n  this.se = null;\n  this.items = null;\n}\n\nTreeNode.prototype.subdivide = function subdivide() {\n  var bounds = this.bounds;\n  var quarter = bounds.half/2;\n\n  this.nw = new TreeNode(new Bounds(bounds.x - quarter, bounds.y - quarter, quarter));\n  this.ne = new TreeNode(new Bounds(bounds.x + quarter, bounds.y - quarter, quarter));\n  this.sw = new TreeNode(new Bounds(bounds.x - quarter, bounds.y + quarter, quarter));\n  this.se = new TreeNode(new Bounds(bounds.x + quarter, bounds.y + quarter, quarter));\n};\n\nTreeNode.prototype.insert = function insert(idx, array, depth) {\n  if (!depth) depth = 0;\n  if (depth > 24) return;  // TODO: this probably needs better handling\n\n  var isLeaf = this.nw === null;\n  if (isLeaf) {\n    // todo: this memory could be recycled to avoid gc\n    if (this.items === null) {\n      this.items = [idx];\n    } else {\n      this.items.push(idx);\n    }\n\n    // TODO: This as well.. Why 0.1? \n    if (this.bounds.half > 0.1) {\n      if (this.items.length >= MAX_ITEMS ) {\n        this.subdivide();\n        for (var i = 0; i < this.items.length; ++i) {\n          this.insert(this.items[i], array, depth + 1);\n        }\n        this.items = null;\n      }\n    }\n  } else {\n    var x = array[idx], y = array[idx + 1];\n    var bounds = this.bounds;\n    var quadIdx = 0; // assume NW\n    if (x > bounds.x) {\n      quadIdx += 1; // nope, we are in E part\n    }\n    if (y > bounds.y) {\n      quadIdx += 2; // Somewhere south.\n    }\n\n    var child = getChild(this, quadIdx);\n    child.insert(idx, array, depth + 1);\n  }\n};\n\nTreeNode.prototype.visit = function visit(cb) {\n  if (cb(this) && this.nw) {\n    this.nw.visit(cb);\n    this.ne.visit(cb);\n    this.sw.visit(cb);\n    this.se.visit(cb);\n  }\n}\n\nTreeNode.prototype.query = function queryBounds(bounds, results, sourceArray, intersects) {\n  if (!intersects(this.bounds, bounds)) return;\n  var items = this.items;\n  if (items) {\n    for (var i = 0; i < items.length; ++i) {\n      var idx = items[i];\n      var x = sourceArray[idx];\n      var y = sourceArray[idx + 1];\n      if (bounds.contains(x, y)) {\n        results.push(idx);\n      }\n    }\n  }\n\n  if (!this.nw) return;\n\n  this.nw.query(bounds, results, sourceArray, intersects);\n  this.ne.query(bounds, results, sourceArray, intersects);\n  this.sw.query(bounds, results, sourceArray, intersects);\n  this.se.query(bounds, results, sourceArray, intersects);\n};\n\nfunction getChild(node, idx) {\n  if (idx === 0) return node.nw;\n  if (idx === 1) return node.ne;\n  if (idx === 2) return node.sw;\n  if (idx === 3) return node.se;\n}\n\n\n/***/ }),\n\n/***/ \"LnN7\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _classCallCheck2 = __webpack_require__(\"Zrlr\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(\"wxAW\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar RouteHandleViewModel = function () {\n  function RouteHandleViewModel(pointChangedCallback, findNearestPoint) {\n    (0, _classCallCheck3.default)(this, RouteHandleViewModel);\n\n    this.visible = false;\n    this.beingDragged = false;\n\n    this.pointId = -1;\n    this.x = 0;\n    this.y = 0;\n    this.r = 18;\n\n    this.pointChanged = pointChangedCallback;\n    this.findNearestPoint = findNearestPoint;\n  }\n\n  (0, _createClass3.default)(RouteHandleViewModel, [{\n    key: 'startDragging',\n    value: function startDragging(scene) {\n      var touchId = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n      var self = this;\n      this.beingDragged = true;\n\n      document.addEventListener('mousemove', onMouseMove, true);\n      document.addEventListener('touchmove', onMouseMove, {\n        capture: true,\n        passive: false\n      });\n      document.addEventListener('touchend', onMouseUp, true);\n      document.addEventListener('touchcancel', onMouseUp, true);\n      document.addEventListener('mouseup', onMouseUp, true);\n\n      function onMouseMove(e) {\n        e.stopPropagation();\n        e.preventDefault();\n        var clientX = void 0,\n            clientY = void 0;\n        if (e.touches) {\n          var mainTouch = void 0;\n          for (var i = 0; i < e.touches.length; ++i) {\n            if (e.touches[i].identifier === touchId) {\n              mainTouch = e.touches[i];\n              break;\n            }\n          }\n\n          if (!mainTouch) return; // not us.\n\n          clientX = mainTouch.clientX;\n          clientY = mainTouch.clientY;\n        } else {\n          clientX = e.clientX;\n          clientY = e.clientY;\n        }\n\n        var s = scene.getSceneCoordinate(clientX, clientY);\n        self.x = s.x;\n        self.y = s.y;\n        var point = self.findNearestPoint(s.x, s.y);\n        self.pointId = point.id;\n        self.pointChanged(self);\n      }\n\n      function onMouseUp(e) {\n        if (e.touches && e.touches.length > 0) {\n          for (var i = 0; i < e.touches.length; ++i) {\n            var touch = e.touches[i];\n            if (touch.identifier === touchId) {\n              // we are in the list of active touches, so it wasn't us\n              return;\n            }\n          }\n        }\n\n        // if we got here, it means the user let go current handle\n        unsubscribe();\n      }\n\n      function unsubscribe() {\n        self.beingDragged = false;\n        document.removeEventListener('mousemove', onMouseMove, true);\n        document.removeEventListener('mouseup', onMouseUp, true);\n        document.removeEventListener('touchmove', onMouseMove, true);\n        document.removeEventListener('touchend', onMouseUp, true);\n        document.removeEventListener('touchcancel', onMouseUp, true);\n      }\n    }\n  }, {\n    key: 'setFrom',\n    value: function setFrom(graphNode) {\n      this.visible = true;\n      this.pointId = graphNode.id;\n      this.x = graphNode.data.x;\n      this.y = graphNode.data.y;\n\n      this.pointChanged(this);\n    }\n  }, {\n    key: 'clear',\n    value: function clear() {\n      this.visible = false;\n      this.pointId = -1;\n      this.x = 0;\n      this.y = 0;\n      this.pointChanged(this);\n    }\n  }, {\n    key: 'intersects',\n    value: function intersects(x, y, scale) {\n      if (!this.visible || this.beingDragged) return false;\n\n      var r = this.r / scale;\n      var dx = x - this.x;\n      var dy = y - this.y;\n      return dx * dx + dy * dy <= r * r;\n    }\n  }]);\n  return RouteHandleViewModel;\n}();\n\nmodule.exports = RouteHandleViewModel;\n\n/***/ }),\n\n/***/ \"M93x\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_App_vue__ = __webpack_require__(\"xJD8\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_App_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_App_vue__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_2893f493_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_node_modules_vue_loader_lib_selector_type_template_index_0_App_vue__ = __webpack_require__(\"R0YH\");\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"5jmk\")\n}\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n/* template */\n\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_App_vue___default.a,\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_2893f493_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_node_modules_vue_loader_lib_selector_type_template_index_0_App_vue__[\"a\" /* default */],\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"MGIa\":\n/***/ (function(module, exports) {\n\nmodule.exports = intersects;\n\nfunction intersects(a, b) {\n  // http://stackoverflow.com/questions/306316/determine-if-two-rectangles-overlap-each-other\n  return a.x - a.half < b.x + b.half &&\n    a.x + a.half > b.x - b.half &&\n    a.y - a.half < b.y + b.half &&\n    a.y + a.half > b.y - b.half;\n}\n\n\n/***/ }),\n\n/***/ \"N1rF\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('g',{attrs:{\"transform\":_vm.screenScale}},[_c('circle',{attrs:{\"r\":_vm.r,\"fill\":\"red\",\"stroke\":\"white\",\"stroke-width\":_vm.strokeWidth}}),_vm._v(\" \"),_c('text',{staticClass:\"no-pointer\",attrs:{\"font-size\":_vm.fontSize,\"fill\":\"white\",\"text-anchor\":\"middle\",\"y\":_vm.textY}},[_vm._v(_vm._s(_vm.symbol))])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"NHnr\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _vue = __webpack_require__(\"7+uW\");\n\nvar _vue2 = _interopRequireDefault(_vue);\n\nvar _App = __webpack_require__(\"M93x\");\n\nvar _App2 = _interopRequireDefault(_App);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\n_vue2.default.config.productionTip = false;\n\n/* eslint-disable no-new */\nnew _vue2.default({\n  el: '#app',\n  template: '<App/>',\n  components: { App: _App2.default }\n});\n\n/***/ }),\n\n/***/ \"R0YH\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('canvas',{ref:\"canvas\",staticClass:\"absolute\"}),_vm._v(\" \"),(!_vm.webGLEnabled)?_c('div',[_vm._m(0)]):_vm._e(),_vm._v(\" \"),(_vm.webGLEnabled)?_c('div',[_c('svg',{ref:\"svg\",staticClass:\"svg-overlay absolute\"},[_c('g',{staticClass:\"scene\"},[_c('path',{ref:\"foundPath\",attrs:{\"d\":_vm.pathInfo.svgPath,\"stroke-width\":\"6x\",\"stroke\":\"red\",\"fill\":\"transparent\"}}),_vm._v(\" \"),(_vm.routeStart.visible)?_c('route-point',{attrs:{\"point\":_vm.routeStart,\"scale\":_vm.scale,\"r\":_vm.routeStart.r,\"symbol\":\"A\",\"fontSize\":28}}):_vm._e(),_vm._v(\" \"),(_vm.routeEnd.visible)?_c('route-point',{attrs:{\"point\":_vm.routeEnd,\"scale\":_vm.scale,\"r\":_vm.routeEnd.r,\"symbol\":\"B\",\"fontSize\":28}}):_vm._e()],1)]),_vm._v(\" \"),(_vm.progress.visible)?_c('div',{staticClass:\"progress center absolute\"},[(!_vm.progress.errorMessage)?_c('div',[_vm._v(\"\\n        \"+_vm._s(_vm.progress.message)+\" \"+_vm._s(_vm.progress.completed)+\"\\n      \")]):_vm._e(),_vm._v(\" \"),(_vm.progress.errorMessage)?_c('div',{staticClass:\"error\"},[_c('div',[_vm._v(_vm._s(_vm.progress.errorMessage))]),_vm._v(\" \"),_c('div',{staticClass:\"error-details\"},[_vm._v(_vm._s(_vm.progress.errorDetails))])]):_vm._e()]):_vm._e(),_vm._v(\" \"),(_vm.loaded && !_vm.progress.visible)?_c('div',{staticClass:\"controls absolute\"},[(_vm.helpVisible)?_c('div',{staticClass:\"help\"},[_vm._v(\"\\n        \"+_vm._s(_vm.getHelpText())+\"\\n      \")]):_vm._e(),_vm._v(\" \"),(!_vm.helpVisible)?_c('div',{staticClass:\"route-info-container\"},[_c('svg',{staticClass:\"route-info\",attrs:{\"viewBox\":\"0 0 400 40\"},on:{\"click\":function($event){$event.preventDefault();_vm.detailsVisible = !_vm.detailsVisible}}},[_c('g',[_c('path',{attrs:{\"d\":\"M20,20 L80,20 M290,20 L350,20\",\"stroke-width\":\"4\",\"stroke\":\"red\",\"fill\":\"transparent\"}}),_vm._v(\" \"),_c('route-point',{attrs:{\"point\":{x: 20, y: 20},\"scale\":1,\"r\":12,\"symbol\":\"A\",\"fontSize\":12,\"strokeWidth\":1,\"textY\":4}}),_vm._v(\" \"),_c('route-point',{attrs:{\"point\":{x: 350, y: 20},\"scale\":1,\"r\":12,\"symbol\":\"B\",\"fontSize\":12,\"strokeWidth\":1,\"textY\":4}}),_vm._v(\" \"),_c('text',{attrs:{\"x\":\"185.5\",\"y\":\"25\",\"fill\":\"white\",\"text-anchor\":\"middle\",\"font-size\":\"18px\"}},[_vm._v(_vm._s(_vm.pathText))])],1),_vm._v(\" \"),_c('g',[(!_vm.detailsVisible)?_c('path',{attrs:{\"d\":\"M372,15 L388,15 380.5,28z\",\"stroke-width\":\"0\",\"stroke\":\"white\",\"fill\":\"hsl(215, 34%, 64%)\"}}):_vm._e(),_vm._v(\" \"),(_vm.detailsVisible)?_c('path',{attrs:{\"d\":\"M372,28 L388,28 380.5,15z\",\"stroke-width\":\"0\",\"stroke\":\"white\",\"fill\":\"hsl(215, 34%, 64%)\"}}):_vm._e()])]),_vm._v(\" \"),_c('a',{staticClass:\"reset\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();_vm.clearRoute($event)}}},[_vm._v(\"clear\")])]):_vm._e(),_vm._v(\" \"),(_vm.detailsVisible && !_vm.helpVisible)?_c('div',{staticClass:\"details\"},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"label\"},[_vm._v(\"Path length:\")]),_vm._v(\" \"),_c('div',{staticClass:\"col\"},[_vm._v(_vm._s(_vm.stats.pathLength))])]),_vm._v(\" \"),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"label\"},[_vm._v(\"Path finder:\")]),_vm._v(\" \"),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.pathFinder.selected),expression:\"pathFinder.selected\"}],staticClass:\"col\",on:{\"change\":[function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.pathFinder.selected=$event.target.multiple ? $$selectedVal : $$selectedVal[0]},_vm.updateSearchAlgorithm]}},_vm._l((_vm.pathFinder.algorithms),function(algorithm){return _c('option',{domProps:{\"value\":algorithm.value}},[_vm._v(_vm._s(algorithm.name))])}))])]):_vm._e()]):_vm._e(),_vm._v(\" \"),(!_vm.progress.visible)?_c('div',{staticClass:\"graph-name\",attrs:{\"title\":_vm.graphNameTitle}},[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.graphSettings.selected),expression:\"graphSettings.selected\"}],staticClass:\"col\",on:{\"change\":[function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.graphSettings.selected=$event.target.multiple ? $$selectedVal : $$selectedVal[0]},_vm.updateGraph]}},_vm._l((_vm.graphSettings.graphs),function(graph){return _c('option',{domProps:{\"value\":graph.value}},[_vm._v(_vm._s(graph.name))])}))]):_vm._e()]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"about-line\"},[_c('a',{staticClass:\"about-link\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();_vm.aboutVisible = true}}},[_vm._v(\"about...\")]),_vm._v(\" \"),_c('a',{staticClass:\"bold\",attrs:{\"href\":\"http://github.com/anvaka/ngraph.path\"}},[_vm._v(\"source code\")])]),_vm._v(\" \"),(!_vm.progress.visible && _vm.graphSettings.selected !== \"USA-road-d.NY\")?_c('div',{staticClass:\"osm-note\"},[_vm._v(\"\\n    Graph was extracted from \"),_c('a',{attrs:{\"href\":\"https://www.openstreetmap.org\",\"target\":\"_blank\"}},[_vm._v(\"www.openstreetmap.org\")]),_vm._v(\".\\n    It is made available under \"),_c('a',{attrs:{\"href\":\"https://opendatacommons.org/licenses/odbl/summary/\",\"target\":\"_blank\"}},[_vm._v(\"ODbL\")])]):_vm._e(),_vm._v(\" \"),(_vm.aboutVisible)?_c('about',{on:{\"close\":function($event){_vm.aboutVisible = false}}}):_vm._e()],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"absolute no-webgl\"},[_c('h4',[_vm._v(\"WebGL is not enabled :(\")]),_vm._v(\" \"),_c('div',[_vm._v(\"While \"),_c('a',{staticClass:\"highlighted\",attrs:{\"href\":\"https://github.com/anvaka/ngraph.path\"}},[_vm._v(\"ngraph.path\")]),_vm._v(\" does not require any webgl, this demo needs it.\")]),_vm._v(\" \"),_c('iframe',{staticClass:\"video-demo\",attrs:{\"src\":\"https://www.youtube.com/embed/hGeZuIEV6KU\",\"frameborder\":\"0\",\"allowfullscreen\":\"\"}})])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"S4H+\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _promise = __webpack_require__(\"//Fk\");\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar request = __webpack_require__(\"vccH\");\nvar endpoint = 'static/';\nvar createGraph = __webpack_require__(\"T/ob\");\nvar BBox = __webpack_require__(\"3Zuw\");\n\nvar asyncFor = __webpack_require__(\"4gmu\");\n\nmodule.exports = loadPositions;\n\nfunction loadPositions(fileName, progress) {\n  var graph = createGraph();\n  var points = void 0;\n  var links = void 0;\n  var graphBBox = new BBox();\n\n  // I used this smaller graph for testing\n  // return new Promise((resolve) => {\n  //   graph.addNode(1, { x: -100, y: 0 });\n  //   graph.addNode(2, { x: 100, y: 0 });\n  //   graph.addLink(1, 2);\n  //   points = [-100, 0, 100, 0];\n  //   links = [1, 2]\n  //   graphBBox.addPoint(-100, 0)\n  //   graphBBox.addPoint(100, 0)\n\n  //   progress.pointsReady = true;\n  //   progress.linksReady = true;\n  //   resolve({graph, points, links, graphBBox});\n  // })\n  return request(endpoint + ('/' + fileName + '.co.bin'), {\n    responseType: 'arraybuffer',\n    progress: reportProgress('Loading intersection coordinates')\n  }).then(setPositions).then(loadLinks).then(function () {\n    return {\n      graph: graph, points: points, links: links, graphBBox: graphBBox\n    };\n  });\n\n  function setPositions(buffer) {\n    points = new Int32Array(buffer);\n    console.log('Downloaded nodes: ' + points.length / 2);\n\n    return initNodes(points);\n  }\n\n  function initNodes(points) {\n    console.time('add nodes to graph');\n    progress.message = 'Adding nodes to graph';\n\n    return new _promise2.default(function (resolve) {\n      asyncFor(points, addPointToGraph, function () {\n        progress.pointsReady = true;\n        console.timeEnd('add nodes to graph');\n        resolve();\n      }, { step: 2 });\n\n      progress.pointsReady = true;\n    });\n  }\n\n  function addPointToGraph(x, i, points) {\n    var nodeId = Math.floor(i / 2);\n    var y = points[i + 1];\n    graph.addNode(nodeId, { x: x, y: y });\n    graphBBox.addPoint(x, y);\n\n    if (i % 500 === 0) {\n      progress.completed = Math.round(100 * i / points.length) + '%';\n    }\n  }\n\n  function loadLinks() {\n    return request(endpoint + ('/' + fileName + '.gr.bin'), {\n      responseType: 'arraybuffer',\n      progress: reportProgress('Loading roads graph')\n    }).then(setLinks);\n  }\n\n  function setLinks(buffer) {\n    links = new Int32Array(buffer);\n\n    progress.message = 'Adding edges to graph';\n    console.time('add edges to graph');\n    return new _promise2.default(function (resolve) {\n      asyncFor(links, addLinkToGraph, function () {\n        console.timeEnd('add edges to graph');\n        progress.linksReady = true;\n        console.log(graph.getLinksCount() + ' edges; ' + graph.getNodesCount() + ' nodes.');\n        resolve();\n      }, { step: 2 });\n    });\n  }\n\n  function addLinkToGraph(fromShifted, i, links) {\n    var fromId = fromShifted - 1;\n    var toId = links[i + 1] - 1;\n\n    graph.addLink(fromId, toId);\n\n    if (i % 500 === 0) {\n      progress.completed = Math.round(100 * i / links.length) + '%';\n    }\n  }\n\n  function reportProgress(name) {\n    return function (e) {\n      progress.message = name;\n      progress.completed = Math.round(e.percent * 100) + '%';\n    };\n  }\n}\n\n/***/ }),\n\n/***/ \"SRj4\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _getPrototypeOf = __webpack_require__(\"Zx67\");\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(\"Zrlr\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(\"wxAW\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(\"zwoO\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(\"Pf15\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar wgl = __webpack_require__(\"vkLu\");\n\n/**\n * Applies current transformation matrix to a given SVG group\n * element.\n */\n\nvar SVGContainer = function (_wgl$Element) {\n  (0, _inherits3.default)(SVGContainer, _wgl$Element);\n\n  /**\n   * @param {SVGGElement} groupElement where transformation should be applied\n   * @param {Function} drawCallback a function that is called after each\n   * `draw()`\n   */\n  function SVGContainer(groupElement, drawCallback) {\n    (0, _classCallCheck3.default)(this, SVGContainer);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, (SVGContainer.__proto__ || (0, _getPrototypeOf2.default)(SVGContainer)).call(this));\n\n    _this.g = groupElement;\n    _this.dx = 0;\n    _this.dy = 0;\n    _this.scale = 0;\n    _this.drawCallback = drawCallback || noop;\n    return _this;\n  }\n\n  (0, _createClass3.default)(SVGContainer, [{\n    key: 'draw',\n    value: function draw() {\n      var transform = this.worldTransform;\n      if (transformsAreSame(this.worldTransform, this)) {\n        // Avoid DOM updates if possible.\n        return;\n      }\n      var pixelRatio = this.scene.getPixelRatio();\n\n      var scale = transform.scale / pixelRatio;\n      var dx = transform.dx / pixelRatio;\n      var dy = transform.dy / pixelRatio;\n\n      this.g.setAttributeNS(null, 'transform', 'matrix(' + scale + ', 0, 0, ' + scale + ', ' + dx + ', ' + dy + ')');\n      this.scale = transform.scale;\n      this.dx = transform.dx;\n      this.dy = transform.dy;\n\n      this.drawCallback(this);\n    }\n  }]);\n  return SVGContainer;\n}(wgl.Element);\n\nfunction transformsAreSame(world, ours) {\n  return world.scale == ours.scale && world.dx === ours.dx && world.dy === ours.dy;\n}\n\nmodule.exports = SVGContainer;\n\nfunction noop() {}\n\n/***/ }),\n\n/***/ \"U0jl\":\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n * Performs a uni-directional A Star search on graph.\n * \n * We will try to minimize f(n) = g(n) + h(n), where\n * g(n) is actual distance from source node to `n`, and\n * h(n) is heuristic distance from `n` to target node.\n */\nmodule.exports = aStarPathSearch;\n\nvar NodeHeap = __webpack_require__(\"31dX\");\nvar makeSearchStatePool = __webpack_require__(\"GKTj\");\nvar heuristics = __webpack_require__(\"8a79\");\nvar defaultSettings = __webpack_require__(\"kSRG\");\n\nvar NO_PATH = defaultSettings.NO_PATH;\n\nmodule.exports.l2 = heuristics.l2;\nmodule.exports.l1 = heuristics.l1;\n\n/**\n * Creates a new instance of pathfinder. A pathfinder has just one method:\n * `find(fromId, toId)`, it may be extended in future.\n * \n * @param {ngraph.graph} graph instance. See https://github.com/anvaka/ngraph.graph\n * @param {Object} options that configures search\n * @param {Function(a, b)} options.heuristic - a function that returns estimated distance between\n * nodes `a` and `b`. This function should never overestimate actual distance between two\n * nodes (otherwise the found path will not be the shortest). Defaults function returns 0,\n * which makes this search equivalent to Dijkstra search.\n * @param {Function(a, b)} options.distance - a function that returns actual distance between two\n * nodes `a` and `b`. By default this is set to return graph-theoretical distance (always 1);\n * \n * @returns {Object} A pathfinder with single method `find()`.\n */\nfunction aStarPathSearch(graph, options) {\n  options = options || {};\n  // whether traversal should be considered over oriented graph.\n  var oriented = options.oriented;\n\n  var heuristic = options.heuristic;\n  if (!heuristic) heuristic = defaultSettings.heuristic;\n\n  var distance = options.distance;\n  if (!distance) distance = defaultSettings.distance;\n  var pool = makeSearchStatePool();\n\n  return {\n    /**\n     * Finds a path between node `fromId` and `toId`.\n     * @returns {Array} of nodes between `toId` and `fromId`. Empty array is returned\n     * if no path is found.\n     */\n    find: find\n  };\n\n  function find(fromId, toId) {\n    var from = graph.getNode(fromId);\n    if (!from) throw new Error('fromId is not defined in this graph: ' + fromId);\n    var to = graph.getNode(toId);\n    if (!to) throw new Error('toId is not defined in this graph: ' + toId);\n    pool.reset();\n\n    // Maps nodeId to NodeSearchState.\n    var nodeState = new Map();\n\n    // the nodes that we still need to evaluate\n    var openSet = new NodeHeap({\n      compare: defaultSettings.compareFScore,\n      setNodeId: defaultSettings.setHeapIndex\n    });\n\n    var startNode = pool.createNewState(from);\n    nodeState.set(fromId, startNode);\n\n    // For the first node, fScore is completely heuristic.\n    startNode.fScore = heuristic(from, to);\n\n    // The cost of going from start to start is zero.\n    startNode.distanceToSource = 0;\n    openSet.push(startNode);\n    startNode.open = 1;\n\n    var cameFrom;\n\n    while (openSet.length > 0) {\n      cameFrom = openSet.pop();\n      if (goalReached(cameFrom, to)) return reconstructPath(cameFrom);\n\n      // no need to visit this node anymore\n      cameFrom.closed = true;\n      graph.forEachLinkedNode(cameFrom.node.id, visitNeighbour, oriented);\n    }\n\n    // If we got here, then there is no path.\n    return NO_PATH;\n\n    function visitNeighbour(otherNode, link) {\n      var otherSearchState = nodeState.get(otherNode.id);\n      if (!otherSearchState) {\n        otherSearchState = pool.createNewState(otherNode);\n        nodeState.set(otherNode.id, otherSearchState);\n      }\n\n      if (otherSearchState.closed) {\n        // Already processed this node.\n        return;\n      }\n      if (otherSearchState.open === 0) {\n        // Remember this node.\n        openSet.push(otherSearchState);\n        otherSearchState.open = 1;\n      }\n\n      var tentativeDistance = cameFrom.distanceToSource + distance(otherNode, cameFrom.node, link);\n      if (tentativeDistance >= otherSearchState.distanceToSource) {\n        // This would only make our path longer. Ignore this route.\n        return;\n      }\n\n      // bingo! we found shorter path:\n      otherSearchState.parent = cameFrom;\n      otherSearchState.distanceToSource = tentativeDistance;\n      otherSearchState.fScore = tentativeDistance + heuristic(otherSearchState.node, to);\n\n      openSet.updateItem(otherSearchState.heapIndex);\n    }\n  }\n}\n\nfunction goalReached(searchState, targetNode) {\n  return searchState.node === targetNode;\n}\n\nfunction reconstructPath(searchState) {\n  var path = [searchState.node];\n  var parent = searchState.parent;\n\n  while (parent) {\n    path.push(parent.node);\n    parent = parent.parent;\n  }\n\n  return path;\n}\n\n\n/***/ }),\n\n/***/ \"Zs8U\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nexports.default = {\n  mounted: function mounted() {\n    var _this = this;\n\n    this.closeHandler = function (e) {\n      if (e.keyCode === 27) {\n        e.preventDefault();\n        _this.close();\n      }\n    };\n    document.addEventListener('keyup', this.closeHandler);\n  },\n  beforeDestroy: function beforeDestroy() {\n    document.removeEventListener('keyup', this.closeHandler);\n  },\n\n  methods: {\n    close: function close() {\n      this.$emit('close');\n    }\n  }\n};\n\n/***/ }),\n\n/***/ \"c27y\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_About_vue__ = __webpack_require__(\"Zs8U\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_About_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_About_vue__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_654b3992_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_node_modules_vue_loader_lib_selector_type_template_index_0_About_vue__ = __webpack_require__(\"JGX7\");\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"e0RS\")\n}\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n/* template */\n\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_About_vue___default.a,\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_654b3992_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_node_modules_vue_loader_lib_selector_type_template_index_0_About_vue__[\"a\" /* default */],\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"e0RS\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"kSRG\":\n/***/ (function(module, exports) {\n\n// We reuse instance of array, but we trie to freeze it as well,\n// so that consumers don't modify it. Maybe it's a bad idea.\nvar NO_PATH = [];\nif (typeof Object.freeze === 'function') Object.freeze(NO_PATH);\n\nmodule.exports = {\n  // Path search settings\n  heuristic: blindHeuristic,\n  distance: constantDistance,\n  compareFScore: compareFScore,\n  NO_PATH: NO_PATH,\n\n  // heap settings\n  setHeapIndex: setHeapIndex,\n\n  // nba:\n  setH1: setH1,\n  setH2: setH2,\n  compareF1Score: compareF1Score,\n  compareF2Score: compareF2Score,\n}\n\nfunction blindHeuristic(/* a, b */) {\n  // blind heuristic makes this search equal to plain Dijkstra path search.\n  return 0;\n}\n\nfunction constantDistance(/* a, b */) {\n  return 1;\n}\n\nfunction compareFScore(a, b) {\n  var result = a.fScore - b.fScore;\n  // TODO: Can I improve speed with smarter ties-breaking?\n  // I tried distanceToSource, but it didn't seem to have much effect\n  return result;\n}\n\nfunction setHeapIndex(nodeSearchState, heapIndex) {\n  nodeSearchState.heapIndex = heapIndex;\n}\n\nfunction compareF1Score(a, b) {\n  return a.f1 - b.f1;\n}\n\nfunction compareF2Score(a, b) {\n  return a.f2 - b.f2;\n}\n\nfunction setH1(node, heapIndex) {\n  node.h1 = heapIndex;\n}\n\nfunction setH2(node, heapIndex) {\n  node.h2 = heapIndex;\n}\n\n/***/ }),\n\n/***/ \"nEty\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n//\n//\n//\n//\n//\n//\n\nexports.default = {\n  name: 'RoutePoint',\n  props: {\n    point: Object,\n    scale: Number,\n    symbol: String,\n    r: Number,\n    strokeWidth: {\n      type: Number,\n      default: 2\n    },\n    fontSize: {\n      type: Number,\n      default: 28\n    },\n    textY: {\n      type: Number,\n      default: 10\n    }\n  },\n  computed: {\n    screenScale: function screenScale() {\n      var scale = 1 / this.scale;\n      var dx = this.point.x;\n      var dy = this.point.y;\n      return 'matrix(' + scale + ', 0, 0, ' + scale + ', ' + dx + ', ' + dy + ')';\n    }\n  }\n};\n\n/***/ }),\n\n/***/ \"pNOi\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _classCallCheck2 = __webpack_require__(\"Zrlr\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(\"wxAW\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Progress = function () {\n  function Progress() {\n    (0, _classCallCheck3.default)(this, Progress);\n\n    this.reset();\n  }\n\n  (0, _createClass3.default)(Progress, [{\n    key: 'setError',\n    value: function setError(errorMessage, details) {\n      this.errorMessage = errorMessage;\n      this.errorDetails = details;\n    }\n  }, {\n    key: 'reset',\n    value: function reset() {\n      this.errorMessage = null;\n      this.errorDetails = null;\n      this.message = '';\n      this.completed = '';\n      this.pointsReady = false;\n      this.linksReady = false;\n      this.treeReady = false;\n    }\n  }, {\n    key: 'visible',\n    get: function get() {\n      return !(this.pointsReady && this.linksReady && this.treeReady);\n    }\n  }]);\n  return Progress;\n}();\n\nmodule.exports = Progress;\n\n/***/ }),\n\n/***/ \"qEFR\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_RoutePoint_vue__ = __webpack_require__(\"nEty\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_RoutePoint_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_RoutePoint_vue__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_4945ea12_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_node_modules_vue_loader_lib_selector_type_template_index_0_RoutePoint_vue__ = __webpack_require__(\"N1rF\");\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n/* template */\n\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_RoutePoint_vue___default.a,\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_4945ea12_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_node_modules_vue_loader_lib_selector_type_template_index_0_RoutePoint_vue__[\"a\" /* default */],\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"r0CE\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = {\n  aStar: __webpack_require__(\"U0jl\"),\n  aGreedy: __webpack_require__(\"CnY6\"),\n  nba: __webpack_require__(\"sA0F\"),\n}\n\n\n/***/ }),\n\n/***/ \"sA0F\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = nba;\n\nvar NodeHeap = __webpack_require__(\"31dX\");\nvar heuristics = __webpack_require__(\"8a79\");\nvar defaultSettings = __webpack_require__(\"kSRG\");\nvar makeNBASearchStatePool = __webpack_require__(\"DkjH\");\n\nvar NO_PATH = defaultSettings.NO_PATH;\n\nmodule.exports.l2 = heuristics.l2;\nmodule.exports.l1 = heuristics.l1;\n\n/**\n * Creates a new instance of pathfinder. A pathfinder has just one method:\n * `find(fromId, toId)`.\n * \n * This is implementation of the NBA* algorithm described in \n * \n *  \"Yet another bidirectional algorithm for shortest paths\" paper by Wim Pijls and Henk Post\n * \n * The paper is available here: https://repub.eur.nl/pub/16100/ei2009-10.pdf\n * \n * @param {ngraph.graph} graph instance. See https://github.com/anvaka/ngraph.graph\n * @param {Object} options that configures search\n * @param {Function(a, b)} options.heuristic - a function that returns estimated distance between\n * nodes `a` and `b`. This function should never overestimate actual distance between two\n * nodes (otherwise the found path will not be the shortest). Defaults function returns 0,\n * which makes this search equivalent to Dijkstra search.\n * @param {Function(a, b)} options.distance - a function that returns actual distance between two\n * nodes `a` and `b`. By default this is set to return graph-theoretical distance (always 1);\n * \n * @returns {Object} A pathfinder with single method `find()`.\n */\nfunction nba(graph, options) {\n  options = options || {};\n  // whether traversal should be considered over oriented graph.\n  var oriented = options.oriented;\n  var quitFast = options.quitFast;\n\n  var heuristic = options.heuristic;\n  if (!heuristic) heuristic = defaultSettings.heuristic;\n\n  var distance = options.distance;\n  if (!distance) distance = defaultSettings.distance;\n\n  // During stress tests I noticed that garbage collection was one of the heaviest\n  // contributors to the algorithm's speed. So I'm using an object pool to recycle nodes.\n  var pool = makeNBASearchStatePool();\n\n  return {\n    /**\n     * Finds a path between node `fromId` and `toId`.\n     * @returns {Array} of nodes between `toId` and `fromId`. Empty array is returned\n     * if no path is found.\n     */\n    find: find\n  };\n\n  function find(fromId, toId) {\n    // I must apologize for the code duplication. This was the easiest way for me to\n    // implement the algorithm fast.\n    var from = graph.getNode(fromId);\n    if (!from) throw new Error('fromId is not defined in this graph: ' + fromId);\n    var to = graph.getNode(toId);\n    if (!to) throw new Error('toId is not defined in this graph: ' + toId);\n\n    pool.reset();\n\n    // I must also apologize for somewhat cryptic names. The NBA* is bi-directional\n    // search algorithm, which means it runs two searches in parallel. One is called\n    // forward search and it runs from source node to target, while the other one\n    // (backward search) runs from target to source.\n\n    // Everywhere where you see `1` it means it's for the forward search. `2` is for \n    // backward search.\n\n    // For oriented graph path finding, we need to reverse the graph, so that\n    // backward search visits correct link. Obviously we don't want to duplicate\n    // the graph, instead we always traverse the graph as non-oriented, and filter\n    // edges in `visitN1Oriented/visitN2Oritented`\n    var forwardVisitor = oriented ? visitN1Oriented : visitN1;\n    var reverseVisitor = oriented ? visitN2Oriented : visitN2;\n\n    // Maps nodeId to NBASearchState.\n    var nodeState = new Map();\n\n    // These two heaps store nodes by their underestimated values.\n    var open1Set = new NodeHeap({\n      compare: defaultSettings.compareF1Score,\n      setNodeId: defaultSettings.setH1\n    });\n    var open2Set = new NodeHeap({\n      compare: defaultSettings.compareF2Score,\n      setNodeId: defaultSettings.setH2\n    });\n\n    // This is where both searches will meet.\n    var minNode;\n\n    // The smallest path length seen so far is stored here:\n    var lMin = Number.POSITIVE_INFINITY;\n\n    // We start by putting start/end nodes to the corresponding heaps\n    // If variable names like `f1`, `g1` are too confusing, please refer\n    // to makeNBASearchStatePool.js file, which has detailed description.\n    var startNode = pool.createNewState(from);\n    nodeState.set(fromId, startNode); \n    startNode.g1 = 0;\n    var f1 = heuristic(from, to);\n    startNode.f1 = f1;\n    open1Set.push(startNode);\n\n    var endNode = pool.createNewState(to);\n    nodeState.set(toId, endNode);\n    endNode.g2 = 0;\n    var f2 = f1; // they should agree originally\n    endNode.f2 = f2;\n    open2Set.push(endNode)\n\n    // the `cameFrom` variable is accessed by both searches, so that we can store parents.\n    var cameFrom;\n\n    // this is the main algorithm loop:\n    while (open2Set.length && open1Set.length) {\n      if (open1Set.length < open2Set.length) {\n        forwardSearch();\n      } else {\n        reverseSearch();\n      }\n\n      if (quitFast && minNode) break;\n    }\n\n    var path = reconstructPath(minNode);\n    return path; // the public API is over\n\n    function forwardSearch() {\n      cameFrom = open1Set.pop();\n      if (cameFrom.closed) {\n        return;\n      }\n\n      cameFrom.closed = true;\n\n      if (cameFrom.f1 < lMin && (cameFrom.g1 + f2 - heuristic(from, cameFrom.node)) < lMin) {\n        graph.forEachLinkedNode(cameFrom.node.id, forwardVisitor);\n      }\n\n      if (open1Set.length > 0) {\n        // this will be used in reverse search\n        f1 = open1Set.peek().f1;\n      } \n    }\n\n    function reverseSearch() {\n      cameFrom = open2Set.pop();\n      if (cameFrom.closed) {\n        return;\n      }\n      cameFrom.closed = true;\n\n      if (cameFrom.f2 < lMin && (cameFrom.g2 + f1 - heuristic(cameFrom.node, to)) < lMin) {\n        graph.forEachLinkedNode(cameFrom.node.id, reverseVisitor);\n      }\n\n      if (open2Set.length > 0) {\n        // this will be used in forward search\n        f2 = open2Set.peek().f2;\n      }\n    }\n\n    function visitN1(otherNode, link) {\n      var otherSearchState = nodeState.get(otherNode.id);\n      if (!otherSearchState) {\n        otherSearchState = pool.createNewState(otherNode);\n        nodeState.set(otherNode.id, otherSearchState);\n      }\n\n      if (otherSearchState.closed) return;\n\n      var tentativeDistance = cameFrom.g1 + distance(cameFrom.node, otherNode, link);\n\n      if (tentativeDistance < otherSearchState.g1) {\n        otherSearchState.g1 = tentativeDistance;\n        otherSearchState.f1 = tentativeDistance + heuristic(otherSearchState.node, to);\n        otherSearchState.p1 = cameFrom;\n        if (otherSearchState.h1 < 0) {\n          open1Set.push(otherSearchState);\n        } else {\n          open1Set.updateItem(otherSearchState.h1);\n        }\n      }\n      var potentialMin = otherSearchState.g1 + otherSearchState.g2;\n      if (potentialMin < lMin) { \n        lMin = potentialMin;\n        minNode = otherSearchState;\n      }\n    }\n\n    function visitN2(otherNode, link) {\n      var otherSearchState = nodeState.get(otherNode.id);\n      if (!otherSearchState) {\n        otherSearchState = pool.createNewState(otherNode);\n        nodeState.set(otherNode.id, otherSearchState);\n      }\n\n      if (otherSearchState.closed) return;\n\n      var tentativeDistance = cameFrom.g2 + distance(cameFrom.node, otherNode, link);\n\n      if (tentativeDistance < otherSearchState.g2) {\n        otherSearchState.g2 = tentativeDistance;\n        otherSearchState.f2 = tentativeDistance + heuristic(from, otherSearchState.node);\n        otherSearchState.p2 = cameFrom;\n        if (otherSearchState.h2 < 0) {\n          open2Set.push(otherSearchState);\n        } else {\n          open2Set.updateItem(otherSearchState.h2);\n        }\n      }\n      var potentialMin = otherSearchState.g1 + otherSearchState.g2;\n      if (potentialMin < lMin) {\n        lMin = potentialMin;\n        minNode = otherSearchState;\n      }\n    }\n\n    function visitN2Oriented(otherNode, link) {\n      // we are going backwards, graph needs to be reversed. \n      if (link.toId === cameFrom.node.id) return visitN2(otherNode, link);\n    }\n    function visitN1Oriented(otherNode, link) {\n      // this is forward direction, so we should be coming FROM:\n      if (link.fromId === cameFrom.node.id) return visitN1(otherNode, link);\n    }\n  }\n}\n\nfunction reconstructPath(searchState) {\n  if (!searchState) return NO_PATH;\n\n  var path = [searchState.node];\n  var parent = searchState.p1;\n\n  while (parent) {\n    path.push(parent.node);\n    parent = parent.p1;\n  }\n\n  var child = searchState.p2;\n\n  while (child) {\n    path.unshift(child.node);\n    child = child.p2;\n  }\n  return path;\n}\n\n\n/***/ }),\n\n/***/ \"uIdY\":\n/***/ (function(module, exports) {\n\nmodule.exports = Bounds;\n\nfunction Bounds(x, y, half) {\n  this.x = typeof x === 'number' ? x : 0;\n  this.y = typeof y === 'number' ? y : 0;\n  this.half = typeof half === 'number' ? half : 0;\n}\n\nBounds.prototype.left = function left() {\n  return this.x - this.half;\n};\n\nBounds.prototype.top = function top() {\n  return this.y - this.half;\n};\n\nBounds.prototype.width = function width() {\n  return this.half * 2;\n};\n\nBounds.prototype.height = function height() {\n  return this.half * 2;\n};\n\nBounds.prototype.centerX = function cx() {\n  return this.x;\n};\n\nBounds.prototype.centerY = function cy() {\n  return this.y;\n};\n\nBounds.prototype.contains = function contains(x, y) {\n  var half = this.half;\n  return this.x - half <= x && x < this.x + half &&\n         this.y - half <= y && y < this.y + half;\n};\n\n\n/***/ }),\n\n/***/ \"vccH\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _promise = __webpack_require__(\"//Fk\");\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nmodule.exports = request;\n\nfunction request(url, options) {\n  if (!options) options = {};\n\n  return new _promise2.default(download);\n\n  function download(resolve, reject) {\n    var req = new XMLHttpRequest();\n\n    if (typeof options.progress === 'function') {\n      req.addEventListener(\"progress\", updateProgress, false);\n    }\n\n    req.addEventListener(\"load\", transferComplete, false);\n    req.addEventListener(\"error\", transferFailed, false);\n    req.addEventListener(\"abort\", transferCanceled, false);\n\n    req.open('GET', url);\n    if (options.responseType) {\n      req.responseType = options.responseType;\n    }\n    req.send(null);\n\n    function updateProgress(e) {\n      if (e.lengthComputable) {\n        options.progress({\n          loaded: e.loaded,\n          total: e.total,\n          percent: e.loaded / e.total\n        });\n      }\n    }\n\n    function transferComplete() {\n      if (req.status !== 200) {\n        reject(\"Unexpected status code \" + req.status + \" when calling \" + url);\n        return;\n      }\n      var response = req.response;\n\n      if (options.responseType === 'json' && typeof response === 'string') {\n        // IE\n        response = JSON.parse(response);\n      }\n\n      resolve(response);\n    }\n\n    function transferFailed() {\n      reject(\"Failed to download \" + url);\n    }\n\n    function transferCanceled() {\n      reject(\"Cancelled download of \" + url);\n    }\n  }\n}\n\n/***/ }),\n\n/***/ \"wmlL\":\n/***/ (function(module, exports) {\n\nmodule.exports = asyncFor;\n\n/**\n * Iterates over array in async manner. This function attempts to maximize\n * number of elements visited within single event loop cycle, while at the\n * same time tries to not exceed a time threshold allowed to stay within\n * event loop.\n *\n * @param {Array} array which needs to be iterated. Array-like objects are OK too.\n * @param {VisitCalback} visitCallback called for every element within for loop.\n * @param {DoneCallback} doneCallback called when iterator has reached end of array.\n * @param {Object=} options - additional configuration:\n * @param {number} [options.step=1] - default iteration step\n * @param {number} [options.maxTimeMS=8] - maximum time (in milliseconds) which\n *   iterator should spend within single event loop.\n * @param {number} [options.probeElements=5000] - how many elements should iterator\n *   visit to measure its iteration speed.\n */\nfunction asyncFor(array, visitCallback, doneCallback, options) {\n  var start = 0;\n  var elapsed = 0;\n  options = options || {};\n  var step = options.step || 1;\n  var maxTimeMS = options.maxTimeMS || 8;\n  var pointsPerLoopCycle = options.probeElements || 5000;\n  // we should never block main thread for too long...\n  setTimeout(processSubset, 0);\n\n  function processSubset() {\n    var finish = Math.min(array.length, start + pointsPerLoopCycle);\n    var i = start;\n    var timeStart = new Date();\n    for (i = start; i < finish; i += step) {\n      visitCallback(array[i], i, array);\n    }\n    if (i < array.length) {\n      elapsed += (new Date() - timeStart);\n      start = i;\n\n      pointsPerLoopCycle = Math.round(start * maxTimeMS/elapsed);\n      setTimeout(processSubset, 0);\n    } else {\n      doneCallback(array);\n    }\n  }\n}\n\n\n/***/ }),\n\n/***/ \"xJD8\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _appModel = __webpack_require__(\"0csq\");\n\nvar _appModel2 = _interopRequireDefault(_appModel);\n\nvar _SVGContainer = __webpack_require__(\"SRj4\");\n\nvar _SVGContainer2 = _interopRequireDefault(_SVGContainer);\n\nvar _RoutePoint = __webpack_require__(\"qEFR\");\n\nvar _RoutePoint2 = _interopRequireDefault(_RoutePoint);\n\nvar _About = __webpack_require__(\"c27y\");\n\nvar _About2 = _interopRequireDefault(_About);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nvar bus = __webpack_require__(\"14gb\");\nvar wgl = __webpack_require__(\"vkLu\");\n\nexports.default = {\n  name: 'app',\n  components: {\n    RoutePoint: _RoutePoint2.default,\n    About: _About2.default\n  },\n  mounted: function mounted() {\n    this.webGLEnabled = wgl.isWebGLEnabled(this.$refs.canvas);\n    if (!this.webGLEnabled) {\n      // TODO: Maybe render something smaller with SVG?\n      return;\n    }\n\n    _appModel2.default.loadPositions();\n    bus.on('graph-loaded', this.createScene, this);\n  },\n  beforeDestroy: function beforeDestroy() {\n    bus.off('graph-loaded', this.createScene);\n    this.ensurePreviousSceneDestroyed();\n  },\n  data: function data() {\n    return {\n      webGLEnabled: true,\n      loaded: false,\n      detailsVisible: false,\n      progress: _appModel2.default.progress,\n      routeStart: _appModel2.default.routeStart,\n      routeEnd: _appModel2.default.routeEnd,\n      stats: _appModel2.default.stats,\n      scale: 1,\n      pathInfo: _appModel2.default.pathInfo,\n      pathFinder: _appModel2.default.pathFinderSettings,\n      graphSettings: _appModel2.default.graphSettings,\n      aboutVisible: false\n    };\n  },\n\n  computed: {\n    graphNameTitle: function graphNameTitle() {\n      var stats = this.stats;\n      if (!stats) return '';\n\n      return stats.graphNodeCount + ' nodes; ' + stats.graphLinksCount + ' edges';\n    },\n    helpVisible: function helpVisible() {\n      return !(this.routeStart.visible && this.routeEnd.visible);\n    },\n    pathText: function pathText() {\n      if (this.pathInfo.noPath) {\n        return 'No path (' + this.stats.lastSearchTook + ')';\n      }\n      return 'Found in: ' + this.stats.lastSearchTook;\n    }\n  },\n\n  methods: {\n    clearRoute: function clearRoute() {\n      _appModel2.default.clearRoute();\n    },\n    getHelpText: function getHelpText() {\n      if (!this.routeStart.visible) {\n        return 'Click anywhere to select starting point';\n      } else if (!this.routeEnd.visible) {\n        return 'Click anywhere to select destination';\n      }\n    },\n    ensurePreviousSceneDestroyed: function ensurePreviousSceneDestroyed() {\n      if (this.scene) {\n        this.scene.dispose();\n        this.scene = null;\n      }\n      if (this.unsubscribeMoveEvents) {\n        this.unsubscribeMoveEvents();\n        this.unsubscribeMoveEvents = null;\n      }\n    },\n    createScene: function createScene() {\n      this.ensurePreviousSceneDestroyed();\n\n      var canvas = this.$refs.canvas;\n      this.loaded = true;\n\n      this.scene = wgl.scene(canvas);\n      // this.scene.setPixelRatio(2);\n      var scene = this.scene;\n      var svgConntainer = new _SVGContainer2.default(this.$refs.svg.querySelector('.scene'), this.updateSVGElements.bind(this));\n      this.scene.appendChild(svgConntainer);\n      scene.setClearColor(12 / 255, 41 / 255, 82 / 255, 1);\n      //scene.setClearColor(1, 1, 1, 1)\n\n      var bbox = _appModel2.default.getGraphBBox();\n      var initialSceneSize = bbox.width / 8;\n      scene.setViewBox({\n        left: -initialSceneSize,\n        top: -initialSceneSize,\n        right: initialSceneSize,\n        bottom: initialSceneSize\n      });\n\n      var graph = _appModel2.default.getGraph();\n\n      var linksCount = graph.getLinksCount();\n      var lines = new wgl.WireCollection(linksCount);\n      lines.color = { r: 0.8, g: 0.8, b: 0.8, a: 0.7\n        // lines.color = {r: 0.1, g: 0.1, b: 0.1, a: 0.9}\n      };graph.forEachLink(function (link) {\n        var from = graph.getNode(link.fromId).data;\n        var to = graph.getNode(link.toId).data;\n\n        lines.add({ from: from, to: to });\n      });\n\n      scene.appendChild(lines);\n\n      scene.on('mousemove', this.onMouseMoveOverScene, this);\n      scene.on('click', this.onSceneClick, this);\n\n      var boundMouseDown = this.handleMouseDown.bind(this);\n      document.body.addEventListener('mousedown', boundMouseDown, true);\n      document.body.addEventListener('touchstart', boundMouseDown, true);\n\n      this.unsubscribeMoveEvents = function () {\n        document.body.removeEventListener('mousedown', boundMouseDown, true);\n        document.body.removeEventListener('touchstart', boundMouseDown, true);\n      };\n    },\n    updateSVGElements: function updateSVGElements(svgConntainer) {\n      var strokeWidth = 6 / svgConntainer.scale;\n      this.$refs.foundPath.setAttributeNS(null, 'stroke-width', strokeWidth + 'px');\n      this.scale = svgConntainer.scale / this.scene.getPixelRatio();\n    },\n    handleMouseDown: function handleMouseDown(e) {\n      var s;\n      var touchId = undefined;\n      if (e.touches) {\n        var mainTouch = (e.changedTouches || e.touches)[0];\n        s = this.scene.getSceneCoordinate(mainTouch.clientX, mainTouch.clientY);\n        touchId = mainTouch.identifier;\n      } else {\n        s = this.scene.getSceneCoordinate(e.clientX, e.clientY);\n      }\n\n      var handleUnderCursor = _appModel2.default.getRouteHandleUnderCursor({\n        sceneX: s.x,\n        sceneY: s.y\n      }, this.scene);\n      if (handleUnderCursor) {\n        e.stopPropagation();\n        e.preventDefault();\n        handleUnderCursor.startDragging(this.scene, touchId);\n        return;\n      }\n    },\n    updateGraph: function updateGraph() {\n      this.ensurePreviousSceneDestroyed();\n      setTimeout(function () {\n        _appModel2.default.updateSelectedGraph();\n      }, 0);\n    },\n    updateSearchAlgorithm: function updateSearchAlgorithm() {\n      _appModel2.default.updateSearchAlgorithm();\n    },\n    onSceneClick: function onSceneClick(e) {\n      _appModel2.default.handleSceneClick(e);\n    },\n    onMouseMoveOverScene: function onMouseMoveOverScene(e) {\n      var now = new Date();\n      var handle = _appModel2.default.getRouteHandleUnderCursor(e, this.scene);\n      if (handle !== this.prevHandle) {\n        this.$refs.canvas.style.cursor = handle ? 'pointer' : '';\n        this.prevHandle = handle;\n      }\n    }\n  }\n};\n\n/***/ })\n\n},[\"NHnr\"]);\n\n\n// WEBPACK FOOTER //\n// static/js/app.0909d77a9f567b9c9812.js","var Bounds = require('./lib/bounds.js');\nvar TreeNode = require('./lib/treeNode.js');\nvar EmptyRegion = new Bounds();\nvar rectangularCheck = require('./lib/rectangularCheck.js');\nvar asyncFor = require('rafor');\n\nmodule.exports = createTree;\n\nfunction createTree() {\n  var queryBounds = new Bounds();\n  var root;\n  var originalArray;\n  var api = {\n\n    /**\n     * Synchronous version of `initAsync()`. Should only be used for small\n     * trees (less than 50-70k of points).\n     *\n     * @param {number[]} points array of points for which we are building the\n     * tree. Flat sequence of (x, y) coordinates. Array length should be\n     * multiple of 2.\n     */\n    init: init,\n\n    /**\n     * Initializes tree asynchronously. Very useful when you have millions\n     * of points and do not want to block rendering thread for too long.\n     *\n     * @param {number[]} points array of points for which we are building the\n     * tree. Flat sequence of (x, y) coordinates. Array length should be\n     * multiple of 2.\n     *\n     * @param {Function=} doneCallback called when tree is initialized. The\n     * callback will be called with single argument which represent current\n     * tree.\n     */\n    initAsync: initAsync,\n    bounds: getBounds,\n    pointsAround: getPointsAround,\n    visit: visit\n  };\n\n  return api;\n\n  function visit(cb) {\n    return root.visit(cb);\n  }\n\n  function getPointsAround(x, y, half, intersectCheck) {\n    if (typeof intersectCheck !== 'function') {\n      intersectCheck = rectangularCheck;\n    }\n    var indices = [];\n    queryBounds.x = x;\n    queryBounds.y = y;\n    queryBounds.half = half;\n    root.query(queryBounds, indices, originalArray, intersectCheck);\n    return indices;\n  }\n\n  function init(points) {\n    verifyPointsInvariant(points);\n\n    originalArray = points;\n    root = createRootNode(points);\n    for (var i = 0; i < points.length; i += 2) {\n      root.insert(i, originalArray);\n    }\n  }\n\n  function initAsync(points, options) {\n    verifyPointsInvariant(points);\n\n    var doneCallback = options && options.done;\n    var progress = options && options.progress;\n\n    root = createRootNode(points);\n    originalArray = points;\n    asyncFor(points, insertToRoot, doneInternal, { step: 2 });\n\n    function insertToRoot(element, i) {\n      root.insert(i, points, 0);\n      if (progress) progress(i, points.length);\n    }\n\n    function doneInternal() {\n      if (typeof doneCallback === 'function') {\n        doneCallback(api);\n      }\n    }\n  }\n\n  function verifyPointsInvariant(points) {\n    if (!points) throw new Error('Points array is required for quadtree to work');\n    if (typeof points.length !== 'number') throw new Error('Points should be array-like object');\n    if (points.length % 2 !== 0) throw new Error('Points array should consist of series of x,y coordinates and be multiple of 2');\n  }\n\n\n  function getBounds() {\n    if (!root) return EmptyRegion;\n    return root.bounds;\n  }\n\n  function createRootNode(points) {\n    // Edge case deserves empty region:\n    if (points.length === 0) {\n      var empty = new Bounds();\n      return new TreeNode(empty);\n    }\n\n    // Otherwise let's figure out how big should be the root region\n    var minX = Number.POSITIVE_INFINITY;\n    var minY = Number.POSITIVE_INFINITY;\n    var maxX = Number.NEGATIVE_INFINITY;\n    var maxY = Number.NEGATIVE_INFINITY;\n    for (var i = 0; i < points.length; i += 2) {\n      var x = points[i], y = points[i + 1];\n      if (x < minX) minX = x;\n      if (x > maxX) maxX = x;\n      if (y < minY) minY = y;\n      if (y > maxY) maxY = y;\n    }\n\n    // Make bounds square:\n    var side = Math.max(maxX - minX, maxY - minY);\n    // since we need to have both sides inside the area, let's artificially\n    // grow the root region:\n    side += 2;\n    minX -= 1;\n    minY -= 1;\n    var half = side/2;\n\n    var bounds = new Bounds(minX + half, minY + half, half);\n    return new TreeNode(bounds);\n  }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../yaqt/index.js\n// module id = /S+c\n// module chunks = 1","/**\n * This is the main application model.\n */\nconst createTree = require('yaqt');\nconst npath = require('ngraph.path'); // the pathfinders\n\nconst loadGraph = require('./lib/loadGraph'); // loads graph asynchronously\nconst Progress = require('./lib/Progress'); // notifies UI about loading progress\n\n// This is a state for two dots A and B on the UI\nconst RouteHandleViewModel = require('./lib/RouteHandleViewModel');\n\n// We use a few options in the UI (available path finders, available graphs)\nconst getSettings = require('./settings.js')\n\n// Some state is shared in the query string (start/end of the route)\nconst queryState = require('query-state');\n\n// And this is how the state communicates asynchronously with App.vue\nconst bus = require('./bus');\n\n// Now that we are done with imports, lets initialize the state.\n\n// First of all, read what we currently have in the query string.\nconst qs = queryState({\n  graph: 'amsterdam-roads'\n});\n\nqs.onChange(updateStateFromQueryString);\n\nlet graph;      // current graph\nlet graphBBox;  // current bounding box for a graph\nlet hetTestTree;       // this tree helps us find graph node under cursor\nlet pathFinder;        // currently selected pathfinder\nlet pathFindersLookup; // initialized after we load graph\n\nlet pendingQueryStringUpdate = 0; // Used to throttle query string updates.\n\nlet routeStart = new RouteHandleViewModel(updateRoute, findNearestPoint);\nlet routeEnd = new RouteHandleViewModel(updateRoute, findNearestPoint);\n\nlet stats = {\n  visible: false,\n  lastSearchTook: 0,\n  pathLength: 0,\n  graphNodeCount: '',\n  graphLinksCount: ''\n};\n\nlet settings = getSettings(qs);\n\nconst api = {\n  loadPositions,\n\n  updateSearchAlgorithm,\n  updateSelectedGraph,\n\n  getGraph,\n  getGraphBBox,\n\n  progress: new Progress(),\n  stats,\n\n  routeStart, \n  routeEnd,\n  pathInfo: {\n    svgPath: '',\n    noPath: false\n  },\n\n  handleSceneClick,\n  getRouteHandleUnderCursor,\n  clearRoute,\n\n  pathFinderSettings: settings.pathFinderSettings,\n  graphSettings: settings.graphSettings\n}\n\nmodule.exports = api;\n\n// The app model is ready at this point.\n\nfunction updateStateFromQueryString(queryState) {\n  let searchChanged = (queryState.fromId !== routeStart.pointId) || \n                      (queryState.toId !== routeEnd.pointId);\n\n  if (searchChanged) {\n    setCurrentSearchFromQueryState();\n    updateRoute();\n  }\n}\n\n\n/**\n * This method sets a new pathfinder, according to currently selected\n * drop down option from `pathFinderSettings`\n */\nfunction updateSearchAlgorithm() {\n  setCurrentPathFinder();\n  qs.set('finder', settings.pathFinderSettings.selected);\n  updateRoute();\n}\n\nfunction getRouteHandleUnderCursor(e, scene) {\n  let transform = scene.getTransform();\n  let scale = transform.scale/scene.getPixelRatio();\n\n  if (routeStart.intersects(e.sceneX, e.sceneY, scale)) {\n    return routeStart;\n  }\n  if (routeEnd.intersects(e.sceneX, e.sceneY, scale)) {\n    return routeEnd;\n  }\n}\n\nfunction getGraphBBox() {\n  return graphBBox;\n}\n\nfunction updateRoute() {\n  if (!(routeStart.visible && routeEnd.visible)) {\n    api.pathInfo.svgPath = '';\n    return;\n  } \n\n  let fromId = routeStart.pointId;\n  let toId = routeEnd.pointId;\n  updateQueryString();\n\n  let start = window.performance.now();\n  let path = findPath(fromId, toId);\n  let end = window.performance.now() - start;\n\n  api.pathInfo.noPath = path.length === 0;\n  api.pathInfo.svgPath = getSvgPath(path);\n\n  stats.lastSearchTook = (Math.round(end * 100)/100) + 'ms';\n  stats.pathLength = getPathLength(path);\n  stats.visible = true;\n}\n\nfunction updateQueryString() {\n  if (pendingQueryStringUpdate) {\n    // iOS doesn't like when we update query string too often.\n    // need to throttle\n    clearTimeout(pendingQueryStringUpdate);\n    pendingQueryStringUpdate = 0;\n  } \n\n  pendingQueryStringUpdate = setTimeout(() => {\n    pendingQueryStringUpdate = 0;\n    if(!(routeStart.visible && routeEnd.visible)) return;\n\n    let fromId = routeStart.pointId;\n    let toId = routeEnd.pointId;\n    if (qs.get('fromId') != fromId) {\n      qs.set('fromId', fromId)\n    }\n    if (qs.get('toId') !== toId) {\n      qs.set('toId', toId);\n    }\n  }, 400);\n}\n\nfunction getPathLength(path) {\n  let totalLength = 0;\n  for (let i = 1; i < path.length; ++i) {\n    totalLength += dataDistance(path[i - 1], path[i]);\n  }\n  return numberWithCommas(Math.round(totalLength));\n}\n\nfunction clearRoute() {\n  routeStart.clear();\n  routeEnd.clear();\n  qs.set({\n    fromId: -1,\n    toId: -1\n  });\n}\n\nfunction handleSceneClick(e) {\n  if (!routeStart.visible) {\n    setRoutePointFormEvent(e, routeStart);\n  } else if (!routeEnd.visible) {\n    setRoutePointFormEvent(e, routeEnd);\n  }\n}\n\nfunction setRoutePointFormEvent(e, routePointViewModel) {\n  if (!hetTestTree) return; // we are not initialized yet.\n\n  let point = findNearestPoint(e.sceneX, e.sceneY)\n  if (!point) throw new Error('Point should be defined at this moment');\n\n  routePointViewModel.setFrom(point);\n}\n\nfunction loadPositions() {\n  let graphName = qs.get('graph');\n  hetTestTree = null;\n  graph = null;\n  stats.visible = false;\n  api.progress.reset();\n\n  loadGraph(graphName, api.progress).then(setApplicationModelVariables)\n  .catch((e) => {\n    api.progress.setError('Could not load the graph', e);\n  });\n}\n\nfunction setApplicationModelVariables(loaded) {\n  graph = loaded.graph;\n  graphBBox = loaded.graphBBox;\n  pathFinder = null;\n\n  initHitTestTree(loaded.points);\n  initPathfinders();\n\n  stats.graphNodeCount = numberWithCommas(graph.getNodesCount());\n  stats.graphLinksCount = numberWithCommas(graph.getLinksCount());\n  bus.fire('graph-loaded')\n  setTimeout(() => {\n    // in case if we have path in the query string\n    updateRoute();\n  }, 0);\n}\n\nfunction initHitTestTree(loadedPoints) {\n  hetTestTree = createTree();\n  hetTestTree.initAsync(loadedPoints, {\n    progress(i, total) {\n      if (i % 500 !== 0) return;\n\n      api.progress.message = 'Initializing tree for point & click'\n      api.progress.completed = Math.round(100 * i/total) + '%';\n    },\n    done() {\n      api.progress.treeReady = true;\n    }\n  });\n}\n\n\n\nfunction initPathfinders() {\n  pathFindersLookup = {\n    'a-greedy-star': npath.aGreedy(graph, {\n      distance: distance,\n      heuristic: distance\n    }),\n    'nba': npath.nba(graph, {\n      distance: distance,\n      heuristic: distance\n    }),\n    'astar-uni': npath.aStar(graph, {\n      distance: distance,\n      heuristic: distance\n    }),\n    'dijkstra': npath.aStar(graph, {\n      distance: distance\n    }),\n  }\n\n  setCurrentPathFinder()\n  setCurrentSearchFromQueryState();\n}\n\nfunction setCurrentPathFinder() {\n  let pathFinderName = settings.pathFinderSettings.selected;\n  pathFinder = pathFindersLookup[pathFinderName];\n  if (!pathFinder) {\n    throw new Error('Cannot find pathfinder ' + pathFinderName);\n  }\n}\n\nfunction setCurrentSearchFromQueryState() {\n  if (!graph) return;\n\n  let fromId = qs.get('fromId');\n  let toId = qs.get('toId');\n  let from = graph.getNode(fromId)\n  let to = graph.getNode(toId)\n  if (from) routeStart.setFrom(from)\n  if (to) routeEnd.setFrom(to)\n}\n\nfunction updateSelectedGraph() {\n  qs.set({\n    graph: settings.graphSettings.selected,\n    fromId: -1,\n    toId: -1\n  });\n\n  loadPositions();\n  clearRoute();\n}\n\nfunction numberWithCommas(x) {\n    return x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n}\n\nfunction findPath(fromId, toId) {\n  return pathFinder.find(fromId, toId).map(l => l.data);\n}\n\nfunction getSvgPath(points) {\n  if (points.length < 1) return '';\n\n  return points.map((pt, index) => {\n    let prefix = (index === 0) ? 'M' : ''\n    return prefix + toPoint(pt);\n  }).join(' ');\n}\n\nfunction toPoint(p) { return p.x + ',' + p.y }\n\nfunction getGraph() {\n  return graph;\n}\n\nfunction findNearestPoint(x, y, maxDistanceToExplore = 2000) {\n  if (!hetTestTree) return;\n\n  let points = hetTestTree.pointsAround(x, y, maxDistanceToExplore).map(idx => graph.getNode(idx/2))\n  .sort((a, b) => {\n    let da = pointDistance(a.data, x, y);\n    let db = pointDistance(b.data, x, y)\n    return da - db;\n  });\n\n  if (points.length > 0) {\n    return points[0];\n  } else {\n    // keep trying.\n    return findNearestPoint(x, y, maxDistanceToExplore * 2);\n  }\n}\n\nfunction pointDistance(src, x, y) {\n  let dx = src.x - x;\n  let dy = src.y - y;\n  return Math.sqrt(dx * dx + dy * dy);\n}\n\nfunction distance(a, b) {\n  return dataDistance(a.data, b.data);\n}\n\nfunction dataDistance(a, b) {\n  let dx = a.x - b.x;\n  let dy = a.y - b.y;\n\n  return Math.sqrt(dx * dx + dy * dy)\n}\n\n\n// WEBPACK FOOTER //\n// ./src/appModel.js","var eventify = require('ngraph.events');\nvar bus = eventify({});\n\nmodule.exports = bus;\n\n\n// WEBPACK FOOTER //\n// ./src/bus.js","/**\n * Based on https://github.com/mourner/tinyqueue\n * Copyright (c) 2017, Vladimir Agafonkin https://github.com/mourner/tinyqueue/blob/master/LICENSE\n * \n * Adapted for PathFinding needs by @anvaka\n * Copyright (c) 2017, Andrei Kashcha\n */\nmodule.exports = NodeHeap;\n\nfunction NodeHeap(data, options) {\n  if (!(this instanceof NodeHeap)) return new NodeHeap(data, options);\n\n  if (!Array.isArray(data)) {\n    // assume first argument is our config object;\n    options = data;\n    data = [];\n  }\n\n  options = options || {};\n\n  this.data = data || [];\n  this.length = this.data.length;\n  this.compare = options.compare || defaultCompare;\n  this.setNodeId = options.setNodeId || noop;\n\n  if (this.length > 0) {\n    for (var i = (this.length >> 1); i >= 0; i--) this._down(i);\n  }\n\n  if (options.setNodeId) {\n    for (var i = 0; i < this.length; ++i) {\n      this.setNodeId(this.data[i], i);\n    }\n  }\n}\n\nfunction noop() {}\n\nfunction defaultCompare(a, b) {\n  return a - b;\n}\n\nNodeHeap.prototype = {\n\n  push: function (item) {\n    this.data.push(item);\n    this.setNodeId(item, this.length);\n    this.length++;\n    this._up(this.length - 1);\n  },\n\n  pop: function () {\n    if (this.length === 0) return undefined;\n\n    var top = this.data[0];\n    this.length--;\n\n    if (this.length > 0) {\n      this.data[0] = this.data[this.length];\n      this.setNodeId(this.data[0], 0);\n      this._down(0);\n    }\n    this.data.pop();\n\n    return top;\n  },\n\n  peek: function () {\n    return this.data[0];\n  },\n\n  updateItem: function (pos) {\n    this._down(pos);\n    this._up(pos);\n  },\n\n  _up: function (pos) {\n    var data = this.data;\n    var compare = this.compare;\n    var setNodeId = this.setNodeId;\n    var item = data[pos];\n\n    while (pos > 0) {\n      var parent = (pos - 1) >> 1;\n      var current = data[parent];\n      if (compare(item, current) >= 0) break;\n        data[pos] = current;\n\n       setNodeId(current, pos);\n       pos = parent;\n    }\n\n    data[pos] = item;\n    setNodeId(item, pos);\n  },\n\n  _down: function (pos) {\n    var data = this.data;\n    var compare = this.compare;\n    var halfLength = this.length >> 1;\n    var item = data[pos];\n    var setNodeId = this.setNodeId;\n\n    while (pos < halfLength) {\n      var left = (pos << 1) + 1;\n      var right = left + 1;\n      var best = data[left];\n\n      if (right < this.length && compare(data[right], best) < 0) {\n        left = right;\n        best = data[right];\n      }\n      if (compare(best, item) >= 0) break;\n\n      data[pos] = best;\n      setNodeId(best, pos);\n      pos = left;\n    }\n\n    data[pos] = item;\n    setNodeId(item, pos);\n  }\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/anvaka/projects/ngraph/modules/ngraph.path/a-star/NodeHeap.js\n// module id = 31dX\n// module chunks = 1","class BBox {\n  constructor() {\n    this.minX = Number.POSITIVE_INFINITY;\n    this.minY = Number.POSITIVE_INFINITY;\n    this.maxX = Number.NEGATIVE_INFINITY;\n    this.maxY = Number.NEGATIVE_INFINITY;\n  }\n\n  growBy(offset) {\n    this.minX -= offset;\n    this.minY -= offset;\n    this.maxX += offset;\n    this.maxY += offset;\n  }\n\n  get left() {\n    return this.minX;\n  }\n\n  get top() {\n    return this.minY;\n  }\n\n  get right() {\n    return this.maxX;\n  }\n\n  get bottom() {\n    return this.maxY;\n  }\n\n  get width() {\n    return this.maxX - this.minX;\n  }\n\n  get height() {\n    return this.maxY - this.minY;\n  }\n\n  get cx() {\n    return (this.minX + this.maxX)/2;\n  }\n\n  get cy() {\n    return (this.minY + this.maxY)/2;\n  }\n\n  addPoint(xIn, yIn) {\n    if (xIn === undefined) throw new Error('Point is not defined');\n    let x = xIn;\n    let y = yIn;\n    if (y === undefined) {\n      // xIn is a point object\n      x = xIn.x;\n      y = xIn.y;\n    }\n\n    if (x < this.minX) this.minX = x;\n    if (x > this.maxX) this.maxX = x;\n    if (y < this.minY) this.minY = y;\n    if (y > this.maxY) this.maxY = y;\n  }\n\n  addRect(rect) {\n    if (!rect) throw new Error('rect is not defined');\n    this.addPoint(rect.left, rect.top);\n    this.addPoint(rect.right, rect.top);\n    this.addPoint(rect.left, rect.bottom);\n    this.addPoint(rect.right, rect.bottom);\n  }\n\n  merge(otherBBox) {\n    if (otherBBox.minX < this.minX) this.minX = otherBBox.minX;\n    if (otherBBox.minY < this.minY) this.minY = otherBBox.minY;\n    if (otherBBox.maxX > this.maxX) this.maxX = otherBBox.maxX;\n    if (otherBBox.maxY > this.maxY) this.maxY = otherBBox.maxY;\n  }\n}\n\nmodule.exports = BBox;\n\n\n\n// WEBPACK FOOTER //\n// ./src/BBox.js","module.exports = {\n  l2: l2,\n  l1: l1\n};\n\n/**\n * Euclid distance (l2 norm);\n * \n * @param {*} a \n * @param {*} b \n */\nfunction l2(a, b) {\n  var dx = a.x - b.x;\n  var dy = a.y - b.y;\n  return Math.sqrt(dx * dx + dy * dy);\n}\n\n/**\n * Manhattan distance (l1 norm);\n * @param {*} a \n * @param {*} b \n */\nfunction l1(a, b) {\n  var dx = a.x - b.x;\n  var dy = a.y - b.y;\n  return Math.abs(dx) + Math.abs(dy);\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/anvaka/projects/ngraph/modules/ngraph.path/a-star/heuristics.js\n// module id = 8a79\n// module chunks = 1","/**\n * Performs suboptimal, greed A Star path finding.\n * This finder does not necessary finds the shortest path. The path\n * that it finds is very close to the shortest one. It is very fast though.\n */\nmodule.exports = aStarBi;\n\nvar NodeHeap = require('./NodeHeap');\nvar makeSearchStatePool = require('./makeSearchStatePool');\nvar heuristics = require('./heuristics');\nvar defaultSettings = require('./defaultSettings');\n\nvar BY_FROM = 1;\nvar BY_TO = 2;\nvar NO_PATH = defaultSettings.NO_PATH;\n\nmodule.exports.l2 = heuristics.l2;\nmodule.exports.l1 = heuristics.l1;\n\n/**\n * Creates a new instance of pathfinder. A pathfinder has just one method:\n * `find(fromId, toId)`, it may be extended in future.\n * \n * NOTE: Algorithm implemented in this code DOES NOT find optimal path.\n * Yet the path that it finds is always near optimal, and it finds it very fast.\n * \n * @param {ngraph.graph} graph instance. See https://github.com/anvaka/ngraph.graph\n * \n * @param {Object} options that configures search\n * @param {Function(a, b)} options.heuristic - a function that returns estimated distance between\n * nodes `a` and `b`.  Defaults function returns 0, which makes this search equivalent to Dijkstra search.\n * @param {Function(a, b)} options.distance - a function that returns actual distance between two\n * nodes `a` and `b`. By default this is set to return graph-theoretical distance (always 1);\n * \n * @returns {Object} A pathfinder with single method `find()`.\n */\nfunction aStarBi(graph, options) {\n  options = options || {};\n  // whether traversal should be considered over oriented graph.\n  var oriented = options.oriented;\n\n  var heuristic = options.heuristic;\n  if (!heuristic) heuristic = defaultSettings.heuristic;\n\n  var distance = options.distance;\n  if (!distance) distance = defaultSettings.distance;\n  var pool = makeSearchStatePool();\n\n  return {\n    find: find\n  };\n\n  function find(fromId, toId) {\n    // Not sure if we should return NO_PATH or throw. Throw seem to be more\n    // helpful to debug errors. So, throwing.\n    var from = graph.getNode(fromId);\n    if (!from) throw new Error('fromId is not defined in this graph: ' + fromId);\n    var to = graph.getNode(toId);\n    if (!to) throw new Error('toId is not defined in this graph: ' + toId);\n\n    if (from === to) return [from]; // trivial case.\n\n    pool.reset();\n\n    var callVisitor = oriented ? orientedVisitor : nonOrientedVisitor;\n\n    // Maps nodeId to NodeSearchState.\n    var nodeState = new Map();\n\n    var openSetFrom = new NodeHeap({\n      compare: defaultSettings.compareFScore,\n      setNodeId: defaultSettings.setHeapIndex\n    });\n\n    var openSetTo = new NodeHeap({\n      compare: defaultSettings.compareFScore,\n      setNodeId: defaultSettings.setHeapIndex\n    });\n\n\n    var startNode = pool.createNewState(from);\n    nodeState.set(fromId, startNode);\n\n    // For the first node, fScore is completely heuristic.\n    startNode.fScore = heuristic(from, to);\n    // The cost of going from start to start is zero.\n    startNode.distanceToSource = 0;\n    openSetFrom.push(startNode);\n    startNode.open = BY_FROM;\n\n    var endNode = pool.createNewState(to);\n    endNode.fScore = heuristic(to, from);\n    endNode.distanceToSource = 0;\n    openSetTo.push(endNode);\n    endNode.open = BY_TO;\n\n    // Cost of the best solution found so far. Used for accurate termination\n    var lMin = Number.POSITIVE_INFINITY;\n    var minFrom;\n    var minTo;\n\n    var currentSet = openSetFrom;\n    var currentOpener = BY_FROM;\n\n    while (openSetFrom.length > 0 && openSetTo.length > 0) {\n      if (openSetFrom.length < openSetTo.length) {\n        // we pick a set with less elements\n        currentOpener = BY_FROM;\n        currentSet = openSetFrom;\n      } else {\n        currentOpener = BY_TO;\n        currentSet = openSetTo;\n      }\n\n      var current = currentSet.pop();\n\n      // no need to visit this node anymore\n      current.closed = true;\n\n      if (current.distanceToSource > lMin) continue;\n\n      graph.forEachLinkedNode(current.node.id, callVisitor);\n\n      if (minFrom && minTo) {\n        // This is not necessary the best path, but we are so greedy that we\n        // can't resist:\n        return reconstructBiDirectionalPath(minFrom, minTo);\n      }\n    }\n\n    return NO_PATH; // No path.\n\n    function nonOrientedVisitor(otherNode, link) {\n      return visitNode(otherNode, link, current);\n    }\n\n    function orientedVisitor(otherNode, link) {\n      // For oritned graphs we need to reverse graph, when traveling\n      // backwards. So, we use non-oriented ngraph's traversal, and \n      // filter link orientation here.\n      if (currentOpener === BY_FROM) {\n        if (link.fromId === current.node.id) return visitNode(otherNode, link, current)\n      } else if (currentOpener === BY_TO) {\n        if (link.toId === current.node.id) return visitNode(otherNode, link, current);\n      }\n    }\n\n    function canExit(currentNode) {\n      var opener = currentNode.open\n      if (opener && opener !== currentOpener) {\n        return true;\n      }\n\n      return false;\n    }\n\n    function reconstructBiDirectionalPath(a, b) {\n      var pathOfNodes = [];\n      var aParent = a;\n      while(aParent) {\n        pathOfNodes.push(aParent.node);\n        aParent = aParent.parent;\n      }\n      var bParent = b;\n      while (bParent) {\n        pathOfNodes.unshift(bParent.node);\n        bParent = bParent.parent\n      }\n      return pathOfNodes;\n    }\n\n    function visitNode(otherNode, link, cameFrom) {\n      var otherSearchState = nodeState.get(otherNode.id);\n      if (!otherSearchState) {\n        otherSearchState = pool.createNewState(otherNode);\n        nodeState.set(otherNode.id, otherSearchState);\n      }\n\n      if (otherSearchState.closed) {\n        // Already processed this node.\n        return;\n      }\n\n      if (canExit(otherSearchState, cameFrom)) {\n        // this node was opened by alternative opener. The sets intersect now,\n        // we found an optimal path, that goes through *this* node. However, there\n        // is no guarantee that this is the global optimal solution path.\n\n        var potentialLMin = otherSearchState.distanceToSource + cameFrom.distanceToSource;\n        if (potentialLMin < lMin) {\n          minFrom = otherSearchState;\n          minTo = cameFrom\n          lMin = potentialLMin;\n        }\n        // we are done with this node.\n        return;\n      }\n\n      var tentativeDistance = cameFrom.distanceToSource + distance(otherSearchState.node, cameFrom.node, link);\n\n      if (tentativeDistance >= otherSearchState.distanceToSource) {\n        // This would only make our path longer. Ignore this route.\n        return;\n      }\n\n      // Choose target based on current working set:\n      var target = (currentOpener === BY_FROM) ? to : from;\n      var newFScore = tentativeDistance + heuristic(otherSearchState.node, target);\n      if (newFScore >= lMin) {\n        // this can't be optimal path, as we have already found a shorter path.\n        return;\n      }\n      otherSearchState.fScore = newFScore;\n\n      if (otherSearchState.open === 0) {\n        // Remember this node in the current set\n        currentSet.push(otherSearchState);\n        currentSet.updateItem(otherSearchState.heapIndex);\n\n        otherSearchState.open = currentOpener;\n      }\n\n      // bingo! we found shorter path:\n      otherSearchState.parent = cameFrom;\n      otherSearchState.distanceToSource = tentativeDistance;\n    }\n  }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/anvaka/projects/ngraph/modules/ngraph.path/a-star/a-greedy-star.js\n// module id = CnY6\n// module chunks = 1","module.exports = makeNBASearchStatePool;\n\n/**\n * Creates new instance of NBASearchState. The instance stores information\n * about search state, and is used by NBA* algorithm.\n *\n * @param {Object} node - original graph node\n */\nfunction NBASearchState(node) {\n  /**\n   * Original graph node.\n   */\n  this.node = node;\n\n  /**\n   * Parent of this node in forward search\n   */\n  this.p1 = null;\n\n  /**\n   * Parent of this node in reverse search\n   */\n  this.p2 = null;\n\n  /**\n   * If this is set to true, then the node was already processed\n   * and we should not touch it anymore.\n   */\n  this.closed = false;\n\n  /**\n   * Actual distance from this node to its parent in forward search\n   */\n  this.g1 = Number.POSITIVE_INFINITY;\n\n  /**\n   * Actual distance from this node to its parent in reverse search\n   */\n  this.g2 = Number.POSITIVE_INFINITY;\n\n\n  /**\n   * Underestimated distance from this node to the path-finding source.\n   */\n  this.f1 = Number.POSITIVE_INFINITY;\n\n  /**\n   * Underestimated distance from this node to the path-finding target.\n   */\n  this.f2 = Number.POSITIVE_INFINITY;\n\n  // used to reconstruct heap when fScore is updated. TODO: do I need them both?\n\n  /**\n   * Index of this node in the forward heap.\n   */\n  this.h1 = -1;\n\n  /**\n   * Index of this node in the reverse heap.\n   */\n  this.h2 = -1;\n}\n\n/**\n * As path-finding is memory-intensive process, we want to reduce pressure on\n * garbage collector. This class helps us to recycle path-finding nodes and significantly\n * reduces the search time (~20% faster than without it).\n */\nfunction makeNBASearchStatePool() {\n  var currentInCache = 0;\n  var nodeCache = [];\n\n  return {\n    /**\n     * Creates a new NBASearchState instance\n     */\n    createNewState: createNewState,\n\n    /**\n     * Marks all created instances available for recycling.\n     */\n    reset: reset\n  };\n\n  function reset() {\n    currentInCache = 0;\n  }\n\n  function createNewState(node) {\n    var cached = nodeCache[currentInCache];\n    if (cached) {\n      // TODO: This almost duplicates constructor code. Not sure if\n      // it would impact performance if I move this code into a function\n      cached.node = node;\n\n      // How we came to this node?\n      cached.p1 = null;\n      cached.p2 = null;\n\n      cached.closed = false;\n\n      cached.g1 = Number.POSITIVE_INFINITY;\n      cached.g2 = Number.POSITIVE_INFINITY;\n      cached.f1 = Number.POSITIVE_INFINITY;\n      cached.f2 = Number.POSITIVE_INFINITY;\n\n      // used to reconstruct heap when fScore is updated.\n      cached.h1 = -1;\n      cached.h2 = -1;\n    } else {\n      cached = new NBASearchState(node);\n      nodeCache[currentInCache] = cached;\n    }\n    currentInCache++;\n    return cached;\n  }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/anvaka/projects/ngraph/modules/ngraph.path/a-star/nba/makeNBASearchStatePool.js\n// module id = DkjH\n// module chunks = 1","module.exports = getSettings\n\nfunction getSettings(qs) {\n  const graphSettings = getAvailableGraphs(qs); \n  const pathFinderSettings = getAvailablePathfinders(qs); \n\n  return {\n    graphSettings,\n    pathFinderSettings\n  };\n}\n\n\nfunction getAvailableGraphs(qs) {\n  let graphs = [{\n    value: 'amsterdam-roads',\n    name: 'Amsterdam (76K edges, 1.1 MB)'\n  }, {\n    value: 'seattle-roads',\n    name: 'Seattle (173K edges, 2.4 MB)'\n  }, {\n    value: 'rome-roads',\n    name: 'Rome (258K edges, 3.8 MB)'\n  }, {\n    value: 'delhi-roads',\n    name: 'Delhi (280K edges, 3.9 MB)'\n  }, {\n    value: 'moscow-roads',\n    name: 'Moscow (451K edges, 6.5 MB)'\n  }, {\n    value: 'USA-road-d.NY',\n    name: 'New York (730K edges, 7.6 MB)'\n  },\n  // Commenting this out, as on mobile devices it may crash the browser.\n  //  {\n  //   value: 'tokyo-roads',\n  //   name: 'Tokyo (879K edges, 12.3 MB)'\n  // }\n];\n\n  return {\n    selected: qs.get('graph'),\n    graphs\n  };\n}\n\nfunction getAvailablePathfinders(qs) {\n  return {\n    selected: qs.get('finder') || 'nba',\n    algorithms: [{\n      value: 'a-greedy-star',\n      name: 'Greedy A* (suboptimal)'\n    }, {\n      value: 'nba',\n      name: 'NBA*'\n    }, {\n      value: 'astar-uni',\n      name: 'Unidirectional A*'\n    }, {\n      value: 'dijkstra',\n      name: 'Dijkstra'\n    }]\n  };\n}\n\n\n// WEBPACK FOOTER //\n// ./src/settings.js","/**\n * This class represents a single search node in the exploration tree for\n * A* algorithm.\n * \n * @param {Object} node  original node in the graph\n */\nfunction NodeSearchState(node) {\n  this.node = node;\n\n  // How we came to this node?\n  this.parent = null;\n\n  this.closed = false;\n  this.open = 0;\n\n  this.distanceToSource = Number.POSITIVE_INFINITY;\n  // the f(n) = g(n) + h(n) value\n  this.fScore = Number.POSITIVE_INFINITY;\n\n  // used to reconstruct heap when fScore is updated.\n  this.heapIndex = -1;\n};\n\nfunction makeSearchStatePool() {\n  var currentInCache = 0;\n  var nodeCache = [];\n\n  return {\n    createNewState: createNewState,\n    reset: reset\n  };\n\n  function reset() {\n    currentInCache = 0;\n  }\n\n  function createNewState(node) {\n    var cached = nodeCache[currentInCache];\n    if (cached) {\n      // TODO: This almost duplicates constructor code. Not sure if\n      // it would impact performance if I move this code into a function\n      cached.node = node;\n      // How we came to this node?\n      cached.parent = null;\n\n      cached.closed = false;\n      cached.open = 0;\n\n      cached.distanceToSource = Number.POSITIVE_INFINITY;\n      // the f(n) = g(n) + h(n) value\n      cached.fScore = Number.POSITIVE_INFINITY;\n\n      // used to reconstruct heap when fScore is updated.\n      cached.heapIndex = -1;\n\n    } else {\n      cached = new NodeSearchState(node);\n      nodeCache[currentInCache] = cached;\n    }\n    currentInCache++;\n    return cached;\n  }\n}\nmodule.exports = makeSearchStatePool;\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/anvaka/projects/ngraph/modules/ngraph.path/a-star/makeSearchStatePool.js\n// module id = GKTj\n// module chunks = 1","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"about\"},[_c('div',{staticClass:\"background absolute\",on:{\"click\":function($event){$event.preventDefault();_vm.close($event)}}}),_vm._v(\" \"),_c('div',{staticClass:\"content\"},[_c('h3',[_vm._v(\"ngraph.path \"),_c('a',{staticClass:\"close bold\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();_vm.close($event)}}},[_vm._v(\"close\")])]),_vm._v(\" \"),_vm._m(0),_c('p',[_vm._v(\"\\n      Don't use this website for actual navigation :).\\n    \")]),_vm._v(\" \"),_vm._m(1),_vm._v(\" \"),_vm._m(2),_vm._v(\" \"),_vm._m(3),_vm._v(\" \"),_vm._m(4),_vm._v(\" \"),_c('a',{staticClass:\"large-close bold\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();_vm.close($event)}}},[_vm._v(\"\\n      close\\n    \")])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"\\n      This website is a demo for the \"),_c('a',{staticClass:\"highlighted\",attrs:{\"href\":\"https://github.com/anvaka/ngraph.path\"}},[_vm._v(\"ngraph.path\")]),_vm._v(\"\\n      library. The library implements pathfinding algorithms for generic graphs (not limited to grids).\\n    \")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"My goal was to build a very fast library, that could help many developers\\n      find their paths. In my tests, the library showed great performance with median\\n      path finding speed \"),_c('span',{staticClass:\"bold\"},[_vm._v(\"34ms\")]),_vm._v(\" on \"),_c('span',{staticClass:\"bold\"},[_vm._v(\"733,844\")]),_vm._v(\" edges graph.\\n    \")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"I built the roads graph for this demo using amazing \"),_c('a',{staticClass:\"highlighted\",attrs:{\"href\":\"http://www.openstreetmap.org/\",\"target\":\"_blank\"}},[_vm._v(\"OpenStreetMap\")]),_vm._v(\".\\n    \")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ul',[_c('li',[_c('a',{staticClass:\"highlighted\",attrs:{\"href\":\"https://github.com/anvaka/ngraph.path\"}},[_vm._v(\"Learn more \")]),_vm._v(\" about this project on GitHub\\n      \")]),_c('li',[_vm._v(\"\\n      Stay tuned for updates on \"),_c('a',{staticClass:\"highlighted\",attrs:{\"href\":\"https://twitter.com/anvaka\"}},[_vm._v(\"Twitter.\")])]),_c('li',[_c('a',{staticClass:\"highlighted\",attrs:{\"href\":\"https://www.youtube.com/watch?v=hGeZuIEV6KU\"}},[_vm._v(\" Watch a video\")]),_vm._v(\" demo.\\n      \")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"With passion,\"),_c('br'),_vm._v(\" Anvaka\")])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-654b3992\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"}}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/About.vue\n// module id = JGX7\n// module chunks = 1","var Bounds = require('./bounds.js');\nvar MAX_ITEMS = 4;\nmodule.exports = TreeNode;\n\nfunction TreeNode(bounds) {\n  this.bounds = bounds;\n  this.nw = null;\n  this.ne = null;\n  this.sw = null;\n  this.se = null;\n  this.items = null;\n}\n\nTreeNode.prototype.subdivide = function subdivide() {\n  var bounds = this.bounds;\n  var quarter = bounds.half/2;\n\n  this.nw = new TreeNode(new Bounds(bounds.x - quarter, bounds.y - quarter, quarter));\n  this.ne = new TreeNode(new Bounds(bounds.x + quarter, bounds.y - quarter, quarter));\n  this.sw = new TreeNode(new Bounds(bounds.x - quarter, bounds.y + quarter, quarter));\n  this.se = new TreeNode(new Bounds(bounds.x + quarter, bounds.y + quarter, quarter));\n};\n\nTreeNode.prototype.insert = function insert(idx, array, depth) {\n  if (!depth) depth = 0;\n  if (depth > 24) return;  // TODO: this probably needs better handling\n\n  var isLeaf = this.nw === null;\n  if (isLeaf) {\n    // todo: this memory could be recycled to avoid gc\n    if (this.items === null) {\n      this.items = [idx];\n    } else {\n      this.items.push(idx);\n    }\n\n    // TODO: This as well.. Why 0.1? \n    if (this.bounds.half > 0.1) {\n      if (this.items.length >= MAX_ITEMS ) {\n        this.subdivide();\n        for (var i = 0; i < this.items.length; ++i) {\n          this.insert(this.items[i], array, depth + 1);\n        }\n        this.items = null;\n      }\n    }\n  } else {\n    var x = array[idx], y = array[idx + 1];\n    var bounds = this.bounds;\n    var quadIdx = 0; // assume NW\n    if (x > bounds.x) {\n      quadIdx += 1; // nope, we are in E part\n    }\n    if (y > bounds.y) {\n      quadIdx += 2; // Somewhere south.\n    }\n\n    var child = getChild(this, quadIdx);\n    child.insert(idx, array, depth + 1);\n  }\n};\n\nTreeNode.prototype.visit = function visit(cb) {\n  if (cb(this) && this.nw) {\n    this.nw.visit(cb);\n    this.ne.visit(cb);\n    this.sw.visit(cb);\n    this.se.visit(cb);\n  }\n}\n\nTreeNode.prototype.query = function queryBounds(bounds, results, sourceArray, intersects) {\n  if (!intersects(this.bounds, bounds)) return;\n  var items = this.items;\n  if (items) {\n    for (var i = 0; i < items.length; ++i) {\n      var idx = items[i];\n      var x = sourceArray[idx];\n      var y = sourceArray[idx + 1];\n      if (bounds.contains(x, y)) {\n        results.push(idx);\n      }\n    }\n  }\n\n  if (!this.nw) return;\n\n  this.nw.query(bounds, results, sourceArray, intersects);\n  this.ne.query(bounds, results, sourceArray, intersects);\n  this.sw.query(bounds, results, sourceArray, intersects);\n  this.se.query(bounds, results, sourceArray, intersects);\n};\n\nfunction getChild(node, idx) {\n  if (idx === 0) return node.nw;\n  if (idx === 1) return node.ne;\n  if (idx === 2) return node.sw;\n  if (idx === 3) return node.se;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../yaqt/lib/treeNode.js\n// module id = L7cz\n// module chunks = 1","class RouteHandleViewModel {\n  constructor(pointChangedCallback, findNearestPoint) {\n    this.visible = false;\n    this.beingDragged = false;\n\n    this.pointId = -1;\n    this.x = 0;\n    this.y = 0;\n    this.r = 18;\n\n    this.pointChanged = pointChangedCallback;\n    this.findNearestPoint = findNearestPoint;\n  }\n\n  startDragging(scene, touchId = undefined) {\n    let self = this;\n    this.beingDragged = true;\n\n    document.addEventListener('mousemove', onMouseMove, true)\n    document.addEventListener('touchmove', onMouseMove, {\n      capture: true,\n      passive: false\n    })\n    document.addEventListener('touchend', onMouseUp, true)\n    document.addEventListener('touchcancel', onMouseUp, true)\n    document.addEventListener('mouseup', onMouseUp, true)\n\n    function onMouseMove(e) {\n      e.stopPropagation();\n      e.preventDefault();\n      let clientX, clientY;\n      if (e.touches) {\n        let mainTouch;\n        for(var i = 0; i < e.touches.length; ++i) {\n          if (e.touches[i].identifier === touchId) {\n            mainTouch = e.touches[i];\n            break;\n          }\n        }\n\n        if (!mainTouch) return; // not us.\n\n        clientX = mainTouch.clientX;\n        clientY = mainTouch.clientY;\n      } else {\n        clientX = e.clientX;\n        clientY = e.clientY;\n      }\n\n      var s = scene.getSceneCoordinate(clientX, clientY);\n      self.x = s.x;\n      self.y = s.y;\n      let point = self.findNearestPoint(s.x, s.y);\n      self.pointId = point.id;\n      self.pointChanged(self)\n    }\n\n    function onMouseUp(e) {\n      if (e.touches && e.touches.length > 0) {\n        for(let i = 0; i < e.touches.length; ++i) {\n          let touch = e.touches[i];\n          if (touch.identifier === touchId) {\n            // we are in the list of active touches, so it wasn't us\n            return;\n          }\n        }\n      }\n\n      // if we got here, it means the user let go current handle\n      unsubscribe();\n    }\n\n    function unsubscribe() {\n      self.beingDragged = false;\n      document.removeEventListener('mousemove', onMouseMove, true);\n      document.removeEventListener('mouseup', onMouseUp, true);\n      document.removeEventListener('touchmove', onMouseMove, true)\n      document.removeEventListener('touchend', onMouseUp, true)\n      document.removeEventListener('touchcancel', onMouseUp, true)\n    }\n  }\n\n  setFrom(graphNode) {\n    this.visible = true;\n    this.pointId = graphNode.id;\n    this.x = graphNode.data.x;\n    this.y = graphNode.data.y;\n\n    this.pointChanged(this);\n  }\n  clear() {\n    this.visible = false;\n    this.pointId = -1;\n    this.x = 0;\n    this.y = 0;\n    this.pointChanged(this);\n  }\n\n  intersects(x, y, scale) {\n    if (!this.visible || this.beingDragged) return false;\n\n    let r = this.r / scale;\n    let dx = x - this.x;\n    let dy = y - this.y;\n    return (dx * dx + dy * dy) <= r * r;\n  }\n}\n\nmodule.exports = RouteHandleViewModel;\n\n\n// WEBPACK FOOTER //\n// ./src/lib/RouteHandleViewModel.js","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2893f493\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2893f493\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = M93x\n// module chunks = 1","module.exports = intersects;\n\nfunction intersects(a, b) {\n  // http://stackoverflow.com/questions/306316/determine-if-two-rectangles-overlap-each-other\n  return a.x - a.half < b.x + b.half &&\n    a.x + a.half > b.x - b.half &&\n    a.y - a.half < b.y + b.half &&\n    a.y + a.half > b.y - b.half;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../yaqt/lib/rectangularCheck.js\n// module id = MGIa\n// module chunks = 1","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('g',{attrs:{\"transform\":_vm.screenScale}},[_c('circle',{attrs:{\"r\":_vm.r,\"fill\":\"red\",\"stroke\":\"white\",\"stroke-width\":_vm.strokeWidth}}),_vm._v(\" \"),_c('text',{staticClass:\"no-pointer\",attrs:{\"font-size\":_vm.fontSize,\"fill\":\"white\",\"text-anchor\":\"middle\",\"y\":_vm.textY}},[_vm._v(_vm._s(_vm.symbol))])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-4945ea12\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"}}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/RoutePoint.vue\n// module id = N1rF\n// module chunks = 1","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport App from './App'\n\nVue.config.productionTip = false\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  template: '<App/>',\n  components: { App }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('canvas',{ref:\"canvas\",staticClass:\"absolute\"}),_vm._v(\" \"),(!_vm.webGLEnabled)?_c('div',[_vm._m(0)]):_vm._e(),_vm._v(\" \"),(_vm.webGLEnabled)?_c('div',[_c('svg',{ref:\"svg\",staticClass:\"svg-overlay absolute\"},[_c('g',{staticClass:\"scene\"},[_c('path',{ref:\"foundPath\",attrs:{\"d\":_vm.pathInfo.svgPath,\"stroke-width\":\"6x\",\"stroke\":\"red\",\"fill\":\"transparent\"}}),_vm._v(\" \"),(_vm.routeStart.visible)?_c('route-point',{attrs:{\"point\":_vm.routeStart,\"scale\":_vm.scale,\"r\":_vm.routeStart.r,\"symbol\":\"A\",\"fontSize\":28}}):_vm._e(),_vm._v(\" \"),(_vm.routeEnd.visible)?_c('route-point',{attrs:{\"point\":_vm.routeEnd,\"scale\":_vm.scale,\"r\":_vm.routeEnd.r,\"symbol\":\"B\",\"fontSize\":28}}):_vm._e()],1)]),_vm._v(\" \"),(_vm.progress.visible)?_c('div',{staticClass:\"progress center absolute\"},[(!_vm.progress.errorMessage)?_c('div',[_vm._v(\"\\n        \"+_vm._s(_vm.progress.message)+\" \"+_vm._s(_vm.progress.completed)+\"\\n      \")]):_vm._e(),_vm._v(\" \"),(_vm.progress.errorMessage)?_c('div',{staticClass:\"error\"},[_c('div',[_vm._v(_vm._s(_vm.progress.errorMessage))]),_vm._v(\" \"),_c('div',{staticClass:\"error-details\"},[_vm._v(_vm._s(_vm.progress.errorDetails))])]):_vm._e()]):_vm._e(),_vm._v(\" \"),(_vm.loaded && !_vm.progress.visible)?_c('div',{staticClass:\"controls absolute\"},[(_vm.helpVisible)?_c('div',{staticClass:\"help\"},[_vm._v(\"\\n        \"+_vm._s(_vm.getHelpText())+\"\\n      \")]):_vm._e(),_vm._v(\" \"),(!_vm.helpVisible)?_c('div',{staticClass:\"route-info-container\"},[_c('svg',{staticClass:\"route-info\",attrs:{\"viewBox\":\"0 0 400 40\"},on:{\"click\":function($event){$event.preventDefault();_vm.detailsVisible = !_vm.detailsVisible}}},[_c('g',[_c('path',{attrs:{\"d\":\"M20,20 L80,20 M290,20 L350,20\",\"stroke-width\":\"4\",\"stroke\":\"red\",\"fill\":\"transparent\"}}),_vm._v(\" \"),_c('route-point',{attrs:{\"point\":{x: 20, y: 20},\"scale\":1,\"r\":12,\"symbol\":\"A\",\"fontSize\":12,\"strokeWidth\":1,\"textY\":4}}),_vm._v(\" \"),_c('route-point',{attrs:{\"point\":{x: 350, y: 20},\"scale\":1,\"r\":12,\"symbol\":\"B\",\"fontSize\":12,\"strokeWidth\":1,\"textY\":4}}),_vm._v(\" \"),_c('text',{attrs:{\"x\":\"185.5\",\"y\":\"25\",\"fill\":\"white\",\"text-anchor\":\"middle\",\"font-size\":\"18px\"}},[_vm._v(_vm._s(_vm.pathText))])],1),_vm._v(\" \"),_c('g',[(!_vm.detailsVisible)?_c('path',{attrs:{\"d\":\"M372,15 L388,15 380.5,28z\",\"stroke-width\":\"0\",\"stroke\":\"white\",\"fill\":\"hsl(215, 34%, 64%)\"}}):_vm._e(),_vm._v(\" \"),(_vm.detailsVisible)?_c('path',{attrs:{\"d\":\"M372,28 L388,28 380.5,15z\",\"stroke-width\":\"0\",\"stroke\":\"white\",\"fill\":\"hsl(215, 34%, 64%)\"}}):_vm._e()])]),_vm._v(\" \"),_c('a',{staticClass:\"reset\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();_vm.clearRoute($event)}}},[_vm._v(\"clear\")])]):_vm._e(),_vm._v(\" \"),(_vm.detailsVisible && !_vm.helpVisible)?_c('div',{staticClass:\"details\"},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"label\"},[_vm._v(\"Path length:\")]),_vm._v(\" \"),_c('div',{staticClass:\"col\"},[_vm._v(_vm._s(_vm.stats.pathLength))])]),_vm._v(\" \"),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"label\"},[_vm._v(\"Path finder:\")]),_vm._v(\" \"),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.pathFinder.selected),expression:\"pathFinder.selected\"}],staticClass:\"col\",on:{\"change\":[function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.pathFinder.selected=$event.target.multiple ? $$selectedVal : $$selectedVal[0]},_vm.updateSearchAlgorithm]}},_vm._l((_vm.pathFinder.algorithms),function(algorithm){return _c('option',{domProps:{\"value\":algorithm.value}},[_vm._v(_vm._s(algorithm.name))])}))])]):_vm._e()]):_vm._e(),_vm._v(\" \"),(!_vm.progress.visible)?_c('div',{staticClass:\"graph-name\",attrs:{\"title\":_vm.graphNameTitle}},[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.graphSettings.selected),expression:\"graphSettings.selected\"}],staticClass:\"col\",on:{\"change\":[function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.graphSettings.selected=$event.target.multiple ? $$selectedVal : $$selectedVal[0]},_vm.updateGraph]}},_vm._l((_vm.graphSettings.graphs),function(graph){return _c('option',{domProps:{\"value\":graph.value}},[_vm._v(_vm._s(graph.name))])}))]):_vm._e()]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"about-line\"},[_c('a',{staticClass:\"about-link\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();_vm.aboutVisible = true}}},[_vm._v(\"about...\")]),_vm._v(\" \"),_c('a',{staticClass:\"bold\",attrs:{\"href\":\"http://github.com/anvaka/ngraph.path\"}},[_vm._v(\"source code\")])]),_vm._v(\" \"),(!_vm.progress.visible && _vm.graphSettings.selected !== \"USA-road-d.NY\")?_c('div',{staticClass:\"osm-note\"},[_vm._v(\"\\n    Graph was extracted from \"),_c('a',{attrs:{\"href\":\"https://www.openstreetmap.org\",\"target\":\"_blank\"}},[_vm._v(\"www.openstreetmap.org\")]),_vm._v(\".\\n    It is made available under \"),_c('a',{attrs:{\"href\":\"https://opendatacommons.org/licenses/odbl/summary/\",\"target\":\"_blank\"}},[_vm._v(\"ODbL\")])]):_vm._e(),_vm._v(\" \"),(_vm.aboutVisible)?_c('about',{on:{\"close\":function($event){_vm.aboutVisible = false}}}):_vm._e()],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"absolute no-webgl\"},[_c('h4',[_vm._v(\"WebGL is not enabled :(\")]),_vm._v(\" \"),_c('div',[_vm._v(\"While \"),_c('a',{staticClass:\"highlighted\",attrs:{\"href\":\"https://github.com/anvaka/ngraph.path\"}},[_vm._v(\"ngraph.path\")]),_vm._v(\" does not require any webgl, this demo needs it.\")]),_vm._v(\" \"),_c('iframe',{staticClass:\"video-demo\",attrs:{\"src\":\"https://www.youtube.com/embed/hGeZuIEV6KU\",\"frameborder\":\"0\",\"allowfullscreen\":\"\"}})])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-2893f493\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"}}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = R0YH\n// module chunks = 1","const request = require('./request');\nconst endpoint = 'static/'\nconst createGraph = require('ngraph.graph');\nconst BBox = require('../BBox');\n\nconst asyncFor = require('rafor');\n\n\nmodule.exports = loadPositions;\n\nfunction loadPositions(fileName, progress) {\n  let graph = createGraph();\n  let points;\n  let links;\n  let graphBBox = new BBox();\n\n  // I used this smaller graph for testing\n  // return new Promise((resolve) => {\n  //   graph.addNode(1, { x: -100, y: 0 });\n  //   graph.addNode(2, { x: 100, y: 0 });\n  //   graph.addLink(1, 2);\n  //   points = [-100, 0, 100, 0];\n  //   links = [1, 2]\n  //   graphBBox.addPoint(-100, 0)\n  //   graphBBox.addPoint(100, 0)\n\n  //   progress.pointsReady = true;\n  //   progress.linksReady = true;\n  //   resolve({graph, points, links, graphBBox});\n  // })\n  return request(endpoint + `/${fileName}.co.bin`, {\n    responseType: 'arraybuffer',\n    progress: reportProgress('Loading intersection coordinates')\n  })\n    .then(setPositions)\n    .then(loadLinks)\n    .then(() => {\n      return {\n        graph, points, links, graphBBox\n      }\n    });\n\n  function setPositions(buffer) {\n    points = new Int32Array(buffer);\n    console.log('Downloaded nodes: ' + points.length/2);\n\n    return initNodes(points);\n  }\n\n  function initNodes(points) {\n    console.time('add nodes to graph');\n    progress.message = 'Adding nodes to graph'\n\n    return new Promise((resolve) => {\n      asyncFor(points, addPointToGraph, () => {\n        progress.pointsReady = true;\n        console.timeEnd('add nodes to graph');\n        resolve();\n      }, { step: 2 });\n\n      progress.pointsReady = true;\n    });\n  }\n\n  function addPointToGraph(x, i, points) {\n    let nodeId = Math.floor(i / 2);\n    let y = points[i + 1];\n    graph.addNode(nodeId, { x, y })\n    graphBBox.addPoint(x, y);\n\n    if (i % 500 === 0) {\n      progress.completed = Math.round(100 * i/points.length) + '%';\n    }\n  }\n\n\n  function loadLinks() {\n    return request(endpoint + `/${fileName}.gr.bin`, {\n      responseType: 'arraybuffer',\n      progress: reportProgress('Loading roads graph')\n    }).then(setLinks)\n  }\n\n  function setLinks(buffer) {\n    links = new Int32Array(buffer);\n\n    progress.message = 'Adding edges to graph'\n    console.time('add edges to graph');\n    return new Promise((resolve) => {\n      asyncFor(links, addLinkToGraph, () => {\n        console.timeEnd('add edges to graph');\n        progress.linksReady = true;\n        console.log(graph.getLinksCount() + ' edges; ' + graph.getNodesCount() + ' nodes.')\n        resolve();\n      }, { step: 2 });\n    });\n  }\n\n  function addLinkToGraph(fromShifted, i, links) {\n    let fromId = fromShifted - 1;\n    let toId = links[i + 1] - 1;\n\n    graph.addLink(fromId, toId);\n\n    if (i % 500 === 0) {\n      progress.completed = Math.round(100 * i/links.length) + '%';\n    }\n  }\n\n\n  function reportProgress(name) {\n    return function(e) {\n      progress.message = name;\n      progress.completed = Math.round(e.percent * 100) + '%';\n    };\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/lib/loadGraph.js","let wgl = require('w-gl');\n\n/**\n * Applies current transformation matrix to a given SVG group\n * element.\n */\nclass SVGContainer extends wgl.Element {\n\n  /**\n   * @param {SVGGElement} groupElement where transformation should be applied\n   * @param {Function} drawCallback a function that is called after each\n   * `draw()`\n   */\n  constructor(groupElement, drawCallback) {\n    super();\n    this.g = groupElement;\n    this.dx = 0;\n    this.dy = 0;\n    this.scale = 0;\n    this.drawCallback = drawCallback || noop;\n  }\n\n  draw() {\n    let transform = this.worldTransform;\n    if(transformsAreSame(this.worldTransform, this)) {\n      // Avoid DOM updates if possible.\n      return;\n    }\n    let pixelRatio = this.scene.getPixelRatio();\n\n    let scale = transform.scale/pixelRatio;\n    let dx = transform.dx/pixelRatio;\n    let dy = transform.dy/pixelRatio;\n\n    this.g.setAttributeNS(null, 'transform', `matrix(${scale}, 0, 0, ${scale}, ${dx}, ${dy})`);\n    this.scale = transform.scale;\n    this.dx = transform.dx;\n    this.dy = transform.dy;\n\n    this.drawCallback(this);\n  }\n}\n\nfunction transformsAreSame(world, ours) {\n  return world.scale == ours.scale &&\n         world.dx === ours.dx &&\n         world.dy === ours.dy;\n}\n\nmodule.exports = SVGContainer;\n\nfunction noop() {}\n\n\n// WEBPACK FOOTER //\n// ./src/SVGContainer.js","/**\n * Performs a uni-directional A Star search on graph.\n * \n * We will try to minimize f(n) = g(n) + h(n), where\n * g(n) is actual distance from source node to `n`, and\n * h(n) is heuristic distance from `n` to target node.\n */\nmodule.exports = aStarPathSearch;\n\nvar NodeHeap = require('./NodeHeap');\nvar makeSearchStatePool = require('./makeSearchStatePool');\nvar heuristics = require('./heuristics');\nvar defaultSettings = require('./defaultSettings.js');\n\nvar NO_PATH = defaultSettings.NO_PATH;\n\nmodule.exports.l2 = heuristics.l2;\nmodule.exports.l1 = heuristics.l1;\n\n/**\n * Creates a new instance of pathfinder. A pathfinder has just one method:\n * `find(fromId, toId)`, it may be extended in future.\n * \n * @param {ngraph.graph} graph instance. See https://github.com/anvaka/ngraph.graph\n * @param {Object} options that configures search\n * @param {Function(a, b)} options.heuristic - a function that returns estimated distance between\n * nodes `a` and `b`. This function should never overestimate actual distance between two\n * nodes (otherwise the found path will not be the shortest). Defaults function returns 0,\n * which makes this search equivalent to Dijkstra search.\n * @param {Function(a, b)} options.distance - a function that returns actual distance between two\n * nodes `a` and `b`. By default this is set to return graph-theoretical distance (always 1);\n * \n * @returns {Object} A pathfinder with single method `find()`.\n */\nfunction aStarPathSearch(graph, options) {\n  options = options || {};\n  // whether traversal should be considered over oriented graph.\n  var oriented = options.oriented;\n\n  var heuristic = options.heuristic;\n  if (!heuristic) heuristic = defaultSettings.heuristic;\n\n  var distance = options.distance;\n  if (!distance) distance = defaultSettings.distance;\n  var pool = makeSearchStatePool();\n\n  return {\n    /**\n     * Finds a path between node `fromId` and `toId`.\n     * @returns {Array} of nodes between `toId` and `fromId`. Empty array is returned\n     * if no path is found.\n     */\n    find: find\n  };\n\n  function find(fromId, toId) {\n    var from = graph.getNode(fromId);\n    if (!from) throw new Error('fromId is not defined in this graph: ' + fromId);\n    var to = graph.getNode(toId);\n    if (!to) throw new Error('toId is not defined in this graph: ' + toId);\n    pool.reset();\n\n    // Maps nodeId to NodeSearchState.\n    var nodeState = new Map();\n\n    // the nodes that we still need to evaluate\n    var openSet = new NodeHeap({\n      compare: defaultSettings.compareFScore,\n      setNodeId: defaultSettings.setHeapIndex\n    });\n\n    var startNode = pool.createNewState(from);\n    nodeState.set(fromId, startNode);\n\n    // For the first node, fScore is completely heuristic.\n    startNode.fScore = heuristic(from, to);\n\n    // The cost of going from start to start is zero.\n    startNode.distanceToSource = 0;\n    openSet.push(startNode);\n    startNode.open = 1;\n\n    var cameFrom;\n\n    while (openSet.length > 0) {\n      cameFrom = openSet.pop();\n      if (goalReached(cameFrom, to)) return reconstructPath(cameFrom);\n\n      // no need to visit this node anymore\n      cameFrom.closed = true;\n      graph.forEachLinkedNode(cameFrom.node.id, visitNeighbour, oriented);\n    }\n\n    // If we got here, then there is no path.\n    return NO_PATH;\n\n    function visitNeighbour(otherNode, link) {\n      var otherSearchState = nodeState.get(otherNode.id);\n      if (!otherSearchState) {\n        otherSearchState = pool.createNewState(otherNode);\n        nodeState.set(otherNode.id, otherSearchState);\n      }\n\n      if (otherSearchState.closed) {\n        // Already processed this node.\n        return;\n      }\n      if (otherSearchState.open === 0) {\n        // Remember this node.\n        openSet.push(otherSearchState);\n        otherSearchState.open = 1;\n      }\n\n      var tentativeDistance = cameFrom.distanceToSource + distance(otherNode, cameFrom.node, link);\n      if (tentativeDistance >= otherSearchState.distanceToSource) {\n        // This would only make our path longer. Ignore this route.\n        return;\n      }\n\n      // bingo! we found shorter path:\n      otherSearchState.parent = cameFrom;\n      otherSearchState.distanceToSource = tentativeDistance;\n      otherSearchState.fScore = tentativeDistance + heuristic(otherSearchState.node, to);\n\n      openSet.updateItem(otherSearchState.heapIndex);\n    }\n  }\n}\n\nfunction goalReached(searchState, targetNode) {\n  return searchState.node === targetNode;\n}\n\nfunction reconstructPath(searchState) {\n  var path = [searchState.node];\n  var parent = searchState.parent;\n\n  while (parent) {\n    path.push(parent.node);\n    parent = parent.parent;\n  }\n\n  return path;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/anvaka/projects/ngraph/modules/ngraph.path/a-star/a-star.js\n// module id = U0jl\n// module chunks = 1","<template>\n  <div class='about'>\n    <div class='background absolute' @click.prevent='close'></div>\n    <div class='content'>\n      <h3>ngraph.path <a class='close bold' href='#' @click.prevent='close'>close</a></h3>\n      <p>\n        This website is a demo for the <a href='https://github.com/anvaka/ngraph.path' class='highlighted'>ngraph.path</a>\n        library. The library implements pathfinding algorithms for generic graphs (not limited to grids).\n      </p><p>\n        Don't use this website for actual navigation :).\n      </p>\n\n      <p>My goal was to build a very fast library, that could help many developers\n        find their paths. In my tests, the library showed great performance with median\n        path finding speed <span class='bold'>34ms</span> on <span class='bold'>733,844</span> edges graph.\n      </p>\n      <p>I built the roads graph for this demo using amazing <a href='http://www.openstreetmap.org/' target='_blank' class='highlighted'>OpenStreetMap</a>.\n      </p>\n      <ul>\n        <li>\n          <a href='https://github.com/anvaka/ngraph.path' class='highlighted'>Learn more </a> about this project on GitHub\n        </li><li>\n        Stay tuned for updates on <a href='https://twitter.com/anvaka' class='highlighted'>Twitter.</a>\n        </li><li>\n        <a href='https://www.youtube.com/watch?v=hGeZuIEV6KU' class='highlighted'> Watch a video</a> demo.\n        </li>\n      </ul>\n      <p>With passion,<br/> Anvaka</p>\n      <a href='#' @click.prevent='close' class='large-close bold'>\n        close\n      </a>\n    </div>\n  </div>\n</template>\n<script>\n\nexport default {\n  mounted() {\n    this.closeHandler = (e) => {\n      if (e.keyCode === 27) {\n        e.preventDefault();\n        this.close();\n      }\n    }\n    document.addEventListener('keyup', this.closeHandler);\n  },\n  beforeDestroy() {\n    document.removeEventListener('keyup', this.closeHandler);\n  },\n  methods: {\n    close() {\n      this.$emit('close');\n    }\n  }\n}\n</script>\n\n<style lang='stylus'>\n.about {\n  position: absolute;\n  overflow-y: auto;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n\n  .close {\n    position: absolute;\n    right: 15px;\n    font-size: 12px;\n  }\n\n  .large-close {\n    width: 100%;\n    height: 32px;\n    display: block;\n    text-align: center;\n  }\n\n  .content {\n    color: hsla(215, 37%, 55%, 1);\n    position: absolute;\n    background-color: hsla(215, 74%, 18%, 1.0);\n    width: 400px;\n    padding: 14px;\n    border: 1px solid hsla(215, 37%, 55%, 1);\n    h3 {\n      margin: 0;\n      font-weight: normal;\n    }\n  }\n}\n\n.background {\n  position: absolute;\n  background-color: hsla(215, 74%, 18%, 0.8);\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n\n@media (max-width: 800px) {\n  .about {\n    justify-content: initial;\n  }\n  .about .content {\n    width: 100%;\n    border: none;\n  }\n}\n</style>\n\n\n\n\n// WEBPACK FOOTER //\n// About.vue?2f89a1de","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-654b3992\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./About.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./About.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-654b3992\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./About.vue\"\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/About.vue\n// module id = c27y\n// module chunks = 1","// We reuse instance of array, but we trie to freeze it as well,\n// so that consumers don't modify it. Maybe it's a bad idea.\nvar NO_PATH = [];\nif (typeof Object.freeze === 'function') Object.freeze(NO_PATH);\n\nmodule.exports = {\n  // Path search settings\n  heuristic: blindHeuristic,\n  distance: constantDistance,\n  compareFScore: compareFScore,\n  NO_PATH: NO_PATH,\n\n  // heap settings\n  setHeapIndex: setHeapIndex,\n\n  // nba:\n  setH1: setH1,\n  setH2: setH2,\n  compareF1Score: compareF1Score,\n  compareF2Score: compareF2Score,\n}\n\nfunction blindHeuristic(/* a, b */) {\n  // blind heuristic makes this search equal to plain Dijkstra path search.\n  return 0;\n}\n\nfunction constantDistance(/* a, b */) {\n  return 1;\n}\n\nfunction compareFScore(a, b) {\n  var result = a.fScore - b.fScore;\n  // TODO: Can I improve speed with smarter ties-breaking?\n  // I tried distanceToSource, but it didn't seem to have much effect\n  return result;\n}\n\nfunction setHeapIndex(nodeSearchState, heapIndex) {\n  nodeSearchState.heapIndex = heapIndex;\n}\n\nfunction compareF1Score(a, b) {\n  return a.f1 - b.f1;\n}\n\nfunction compareF2Score(a, b) {\n  return a.f2 - b.f2;\n}\n\nfunction setH1(node, heapIndex) {\n  node.h1 = heapIndex;\n}\n\nfunction setH2(node, heapIndex) {\n  node.h2 = heapIndex;\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/anvaka/projects/ngraph/modules/ngraph.path/a-star/defaultSettings.js\n// module id = kSRG\n// module chunks = 1","<template>\n  <g :transform='screenScale'>\n    <circle :r='r' fill='red' stroke='white' :stroke-width='strokeWidth' ></circle>\n    <text :font-size='fontSize' fill='white' text-anchor='middle' :y='textY' class='no-pointer'>{{symbol}}</text>\n  </g>\n</template>\n<script>\nexport default {\n  name: 'RoutePoint',\n  props: {\n    point: Object,\n    scale: Number,\n    symbol: String,\n    r: Number,\n    strokeWidth: {\n      type: Number,\n      default: 2\n    },\n    fontSize: {\n      type: Number,\n      default: 28\n    },\n    textY: {\n      type: Number,\n      default: 10\n    }\n  },\n  computed: {\n    screenScale() {\n      let scale = 1/this.scale;\n      let dx = this.point.x;\n      let dy = this.point.y;\n      return `matrix(${scale}, 0, 0, ${scale}, ${dx}, ${dy})`;\n    },\n  }\n}\n</script>\n\n\n// WEBPACK FOOTER //\n// RoutePoint.vue?235f648e","class Progress {\n  constructor() {\n    this.reset();\n  }\n\n  get visible() {\n    return !(this.pointsReady && this.linksReady && this.treeReady);\n  }\n\n  setError(errorMessage, details) {\n    this.errorMessage = errorMessage;\n    this.errorDetails = details;\n  }\n\n  reset() {\n    this.errorMessage = null;\n    this.errorDetails = null;\n    this.message = '';\n    this.completed = '';\n    this.pointsReady = false;\n    this.linksReady = false;\n    this.treeReady = false;\n  }\n}\n\nmodule.exports = Progress;\n\n\n// WEBPACK FOOTER //\n// ./src/lib/Progress.js","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./RoutePoint.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4945ea12\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./RoutePoint.vue\"\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/RoutePoint.vue\n// module id = qEFR\n// module chunks = 1","module.exports = {\n  aStar: require('./a-star/a-star.js'),\n  aGreedy: require('./a-star/a-greedy-star'),\n  nba: require('./a-star/nba/index.js'),\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/anvaka/projects/ngraph/modules/ngraph.path/index.js\n// module id = r0CE\n// module chunks = 1","module.exports = nba;\n\nvar NodeHeap = require('../NodeHeap');\nvar heuristics = require('../heuristics');\nvar defaultSettings = require('../defaultSettings.js');\nvar makeNBASearchStatePool = require('./makeNBASearchStatePool.js');\n\nvar NO_PATH = defaultSettings.NO_PATH;\n\nmodule.exports.l2 = heuristics.l2;\nmodule.exports.l1 = heuristics.l1;\n\n/**\n * Creates a new instance of pathfinder. A pathfinder has just one method:\n * `find(fromId, toId)`.\n * \n * This is implementation of the NBA* algorithm described in \n * \n *  \"Yet another bidirectional algorithm for shortest paths\" paper by Wim Pijls and Henk Post\n * \n * The paper is available here: https://repub.eur.nl/pub/16100/ei2009-10.pdf\n * \n * @param {ngraph.graph} graph instance. See https://github.com/anvaka/ngraph.graph\n * @param {Object} options that configures search\n * @param {Function(a, b)} options.heuristic - a function that returns estimated distance between\n * nodes `a` and `b`. This function should never overestimate actual distance between two\n * nodes (otherwise the found path will not be the shortest). Defaults function returns 0,\n * which makes this search equivalent to Dijkstra search.\n * @param {Function(a, b)} options.distance - a function that returns actual distance between two\n * nodes `a` and `b`. By default this is set to return graph-theoretical distance (always 1);\n * \n * @returns {Object} A pathfinder with single method `find()`.\n */\nfunction nba(graph, options) {\n  options = options || {};\n  // whether traversal should be considered over oriented graph.\n  var oriented = options.oriented;\n  var quitFast = options.quitFast;\n\n  var heuristic = options.heuristic;\n  if (!heuristic) heuristic = defaultSettings.heuristic;\n\n  var distance = options.distance;\n  if (!distance) distance = defaultSettings.distance;\n\n  // During stress tests I noticed that garbage collection was one of the heaviest\n  // contributors to the algorithm's speed. So I'm using an object pool to recycle nodes.\n  var pool = makeNBASearchStatePool();\n\n  return {\n    /**\n     * Finds a path between node `fromId` and `toId`.\n     * @returns {Array} of nodes between `toId` and `fromId`. Empty array is returned\n     * if no path is found.\n     */\n    find: find\n  };\n\n  function find(fromId, toId) {\n    // I must apologize for the code duplication. This was the easiest way for me to\n    // implement the algorithm fast.\n    var from = graph.getNode(fromId);\n    if (!from) throw new Error('fromId is not defined in this graph: ' + fromId);\n    var to = graph.getNode(toId);\n    if (!to) throw new Error('toId is not defined in this graph: ' + toId);\n\n    pool.reset();\n\n    // I must also apologize for somewhat cryptic names. The NBA* is bi-directional\n    // search algorithm, which means it runs two searches in parallel. One is called\n    // forward search and it runs from source node to target, while the other one\n    // (backward search) runs from target to source.\n\n    // Everywhere where you see `1` it means it's for the forward search. `2` is for \n    // backward search.\n\n    // For oriented graph path finding, we need to reverse the graph, so that\n    // backward search visits correct link. Obviously we don't want to duplicate\n    // the graph, instead we always traverse the graph as non-oriented, and filter\n    // edges in `visitN1Oriented/visitN2Oritented`\n    var forwardVisitor = oriented ? visitN1Oriented : visitN1;\n    var reverseVisitor = oriented ? visitN2Oriented : visitN2;\n\n    // Maps nodeId to NBASearchState.\n    var nodeState = new Map();\n\n    // These two heaps store nodes by their underestimated values.\n    var open1Set = new NodeHeap({\n      compare: defaultSettings.compareF1Score,\n      setNodeId: defaultSettings.setH1\n    });\n    var open2Set = new NodeHeap({\n      compare: defaultSettings.compareF2Score,\n      setNodeId: defaultSettings.setH2\n    });\n\n    // This is where both searches will meet.\n    var minNode;\n\n    // The smallest path length seen so far is stored here:\n    var lMin = Number.POSITIVE_INFINITY;\n\n    // We start by putting start/end nodes to the corresponding heaps\n    // If variable names like `f1`, `g1` are too confusing, please refer\n    // to makeNBASearchStatePool.js file, which has detailed description.\n    var startNode = pool.createNewState(from);\n    nodeState.set(fromId, startNode); \n    startNode.g1 = 0;\n    var f1 = heuristic(from, to);\n    startNode.f1 = f1;\n    open1Set.push(startNode);\n\n    var endNode = pool.createNewState(to);\n    nodeState.set(toId, endNode);\n    endNode.g2 = 0;\n    var f2 = f1; // they should agree originally\n    endNode.f2 = f2;\n    open2Set.push(endNode)\n\n    // the `cameFrom` variable is accessed by both searches, so that we can store parents.\n    var cameFrom;\n\n    // this is the main algorithm loop:\n    while (open2Set.length && open1Set.length) {\n      if (open1Set.length < open2Set.length) {\n        forwardSearch();\n      } else {\n        reverseSearch();\n      }\n\n      if (quitFast && minNode) break;\n    }\n\n    var path = reconstructPath(minNode);\n    return path; // the public API is over\n\n    function forwardSearch() {\n      cameFrom = open1Set.pop();\n      if (cameFrom.closed) {\n        return;\n      }\n\n      cameFrom.closed = true;\n\n      if (cameFrom.f1 < lMin && (cameFrom.g1 + f2 - heuristic(from, cameFrom.node)) < lMin) {\n        graph.forEachLinkedNode(cameFrom.node.id, forwardVisitor);\n      }\n\n      if (open1Set.length > 0) {\n        // this will be used in reverse search\n        f1 = open1Set.peek().f1;\n      } \n    }\n\n    function reverseSearch() {\n      cameFrom = open2Set.pop();\n      if (cameFrom.closed) {\n        return;\n      }\n      cameFrom.closed = true;\n\n      if (cameFrom.f2 < lMin && (cameFrom.g2 + f1 - heuristic(cameFrom.node, to)) < lMin) {\n        graph.forEachLinkedNode(cameFrom.node.id, reverseVisitor);\n      }\n\n      if (open2Set.length > 0) {\n        // this will be used in forward search\n        f2 = open2Set.peek().f2;\n      }\n    }\n\n    function visitN1(otherNode, link) {\n      var otherSearchState = nodeState.get(otherNode.id);\n      if (!otherSearchState) {\n        otherSearchState = pool.createNewState(otherNode);\n        nodeState.set(otherNode.id, otherSearchState);\n      }\n\n      if (otherSearchState.closed) return;\n\n      var tentativeDistance = cameFrom.g1 + distance(cameFrom.node, otherNode, link);\n\n      if (tentativeDistance < otherSearchState.g1) {\n        otherSearchState.g1 = tentativeDistance;\n        otherSearchState.f1 = tentativeDistance + heuristic(otherSearchState.node, to);\n        otherSearchState.p1 = cameFrom;\n        if (otherSearchState.h1 < 0) {\n          open1Set.push(otherSearchState);\n        } else {\n          open1Set.updateItem(otherSearchState.h1);\n        }\n      }\n      var potentialMin = otherSearchState.g1 + otherSearchState.g2;\n      if (potentialMin < lMin) { \n        lMin = potentialMin;\n        minNode = otherSearchState;\n      }\n    }\n\n    function visitN2(otherNode, link) {\n      var otherSearchState = nodeState.get(otherNode.id);\n      if (!otherSearchState) {\n        otherSearchState = pool.createNewState(otherNode);\n        nodeState.set(otherNode.id, otherSearchState);\n      }\n\n      if (otherSearchState.closed) return;\n\n      var tentativeDistance = cameFrom.g2 + distance(cameFrom.node, otherNode, link);\n\n      if (tentativeDistance < otherSearchState.g2) {\n        otherSearchState.g2 = tentativeDistance;\n        otherSearchState.f2 = tentativeDistance + heuristic(from, otherSearchState.node);\n        otherSearchState.p2 = cameFrom;\n        if (otherSearchState.h2 < 0) {\n          open2Set.push(otherSearchState);\n        } else {\n          open2Set.updateItem(otherSearchState.h2);\n        }\n      }\n      var potentialMin = otherSearchState.g1 + otherSearchState.g2;\n      if (potentialMin < lMin) {\n        lMin = potentialMin;\n        minNode = otherSearchState;\n      }\n    }\n\n    function visitN2Oriented(otherNode, link) {\n      // we are going backwards, graph needs to be reversed. \n      if (link.toId === cameFrom.node.id) return visitN2(otherNode, link);\n    }\n    function visitN1Oriented(otherNode, link) {\n      // this is forward direction, so we should be coming FROM:\n      if (link.fromId === cameFrom.node.id) return visitN1(otherNode, link);\n    }\n  }\n}\n\nfunction reconstructPath(searchState) {\n  if (!searchState) return NO_PATH;\n\n  var path = [searchState.node];\n  var parent = searchState.p1;\n\n  while (parent) {\n    path.push(parent.node);\n    parent = parent.p1;\n  }\n\n  var child = searchState.p2;\n\n  while (child) {\n    path.unshift(child.node);\n    child = child.p2;\n  }\n  return path;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/anvaka/projects/ngraph/modules/ngraph.path/a-star/nba/index.js\n// module id = sA0F\n// module chunks = 1","module.exports = Bounds;\n\nfunction Bounds(x, y, half) {\n  this.x = typeof x === 'number' ? x : 0;\n  this.y = typeof y === 'number' ? y : 0;\n  this.half = typeof half === 'number' ? half : 0;\n}\n\nBounds.prototype.left = function left() {\n  return this.x - this.half;\n};\n\nBounds.prototype.top = function top() {\n  return this.y - this.half;\n};\n\nBounds.prototype.width = function width() {\n  return this.half * 2;\n};\n\nBounds.prototype.height = function height() {\n  return this.half * 2;\n};\n\nBounds.prototype.centerX = function cx() {\n  return this.x;\n};\n\nBounds.prototype.centerY = function cy() {\n  return this.y;\n};\n\nBounds.prototype.contains = function contains(x, y) {\n  var half = this.half;\n  return this.x - half <= x && x < this.x + half &&\n         this.y - half <= y && y < this.y + half;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../yaqt/lib/bounds.js\n// module id = uIdY\n// module chunks = 1","module.exports = request;\n\nfunction request(url, options) {\n  if (!options) options = {};\n\n  return new Promise(download);\n\n  function download(resolve, reject) {\n    var req = new XMLHttpRequest();\n\n    if (typeof options.progress === 'function') {\n      req.addEventListener(\"progress\", updateProgress, false);\n    }\n\n    req.addEventListener(\"load\", transferComplete, false);\n    req.addEventListener(\"error\", transferFailed, false);\n    req.addEventListener(\"abort\", transferCanceled, false);\n\n    req.open('GET', url);\n    if (options.responseType) {\n      req.responseType = options.responseType;\n    }\n    req.send(null);\n\n    function updateProgress(e) {\n      if (e.lengthComputable) {\n        options.progress({\n          loaded: e.loaded,\n          total: e.total,\n          percent: e.loaded / e.total\n        });\n      }\n    }\n\n    function transferComplete() {\n      if (req.status !== 200) {\n        reject(`Unexpected status code ${req.status} when calling ${url}`);\n        return;\n      }\n      var response = req.response;\n\n      if (options.responseType === 'json' && typeof response === 'string') {\n        // IE\n        response = JSON.parse(response);\n      }\n\n      resolve(response);\n    }\n\n    function transferFailed() {\n      reject(`Failed to download ${url}`);\n    }\n\n    function transferCanceled() {\n      reject(`Cancelled download of ${url}`);\n    }\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/lib/request.js","module.exports = asyncFor;\n\n/**\n * Iterates over array in async manner. This function attempts to maximize\n * number of elements visited within single event loop cycle, while at the\n * same time tries to not exceed a time threshold allowed to stay within\n * event loop.\n *\n * @param {Array} array which needs to be iterated. Array-like objects are OK too.\n * @param {VisitCalback} visitCallback called for every element within for loop.\n * @param {DoneCallback} doneCallback called when iterator has reached end of array.\n * @param {Object=} options - additional configuration:\n * @param {number} [options.step=1] - default iteration step\n * @param {number} [options.maxTimeMS=8] - maximum time (in milliseconds) which\n *   iterator should spend within single event loop.\n * @param {number} [options.probeElements=5000] - how many elements should iterator\n *   visit to measure its iteration speed.\n */\nfunction asyncFor(array, visitCallback, doneCallback, options) {\n  var start = 0;\n  var elapsed = 0;\n  options = options || {};\n  var step = options.step || 1;\n  var maxTimeMS = options.maxTimeMS || 8;\n  var pointsPerLoopCycle = options.probeElements || 5000;\n  // we should never block main thread for too long...\n  setTimeout(processSubset, 0);\n\n  function processSubset() {\n    var finish = Math.min(array.length, start + pointsPerLoopCycle);\n    var i = start;\n    var timeStart = new Date();\n    for (i = start; i < finish; i += step) {\n      visitCallback(array[i], i, array);\n    }\n    if (i < array.length) {\n      elapsed += (new Date() - timeStart);\n      start = i;\n\n      pointsPerLoopCycle = Math.round(start * maxTimeMS/elapsed);\n      setTimeout(processSubset, 0);\n    } else {\n      doneCallback(array);\n    }\n  }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../yaqt/~/rafor/index.js\n// module id = wmlL\n// module chunks = 1","<template>\n  <div id=\"app\">\n    <canvas ref='canvas' class='absolute'></canvas>\n    <div v-if='!webGLEnabled'>\n      <div class='absolute no-webgl'>\n        <h4>WebGL is not enabled :(</h4>\n        <div>While <a href='https://github.com/anvaka/ngraph.path' class='highlighted'>ngraph.path</a> does not require any webgl, this demo needs it.</div>\n        <iframe src=\"https://www.youtube.com/embed/hGeZuIEV6KU\" frameborder=\"0\" allowfullscreen class='video-demo'></iframe>\n      </div>\n    </div>\n    <div v-if='webGLEnabled'>\n      <svg ref='svg' class='svg-overlay absolute'>\n        <g class='scene'>\n          <path ref='foundPath' :d='pathInfo.svgPath' stroke-width='6x' stroke='red' fill=\"transparent\" ></path>\n          <route-point :point='routeStart' :scale='scale' :r='routeStart.r' symbol='A' v-if='routeStart.visible' :fontSize='28'></route-point>\n          <route-point :point='routeEnd' :scale='scale' :r='routeEnd.r' symbol='B' v-if='routeEnd.visible' :fontSize='28'></route-point>\n        </g>\n      </svg>\n      <div class='progress center absolute' v-if='progress.visible'>\n        <div v-if='!progress.errorMessage'>\n          {{progress.message}} {{progress.completed}}\n        </div>     \n        <div v-if='progress.errorMessage' class='error'>\n          <div>{{progress.errorMessage}}</div>\n          <div class='error-details'>{{progress.errorDetails}}</div>\n        </div>\n      </div>\n      <div class='controls absolute' v-if='loaded && !progress.visible'>\n        <div class='help' v-if='helpVisible'>\n          {{getHelpText()}}\n        </div>\n        <div class='route-info-container' v-if='!helpVisible' >\n          <svg class='route-info' viewBox='0 0 400 40'  @click.prevent='detailsVisible = !detailsVisible'>\n            <g>\n              <path d='M20,20 L80,20 M290,20 L350,20' stroke-width='4' stroke='red' fill=\"transparent\" ></path>\n              <route-point :point='{x: 20, y: 20}' :scale='1' :r='12' symbol='A' :fontSize='12' :strokeWidth='1' :textY='4' ></route-point>\n              <route-point :point='{x: 350, y: 20}' :scale='1' :r='12' symbol='B' :fontSize='12' :strokeWidth='1' :textY='4'></route-point>\n              <text x='185.5' y='25' fill='white' text-anchor='middle' font-size='18px'>{{pathText}}</text>\n            </g>\n            <g>\n              <path d='M372,15 L388,15 380.5,28z' stroke-width='0' stroke='white' fill=\"hsl(215, 34%, 64%)\" v-if='!detailsVisible'></path>\n              <path d='M372,28 L388,28 380.5,15z' stroke-width='0' stroke='white' fill=\"hsl(215, 34%, 64%)\" v-if='detailsVisible'></path>\n            </g>\n          </svg>\n          <a href='#' @click.prevent='clearRoute' class='reset'>clear</a>\n        </div>\n        <div v-if='detailsVisible && !helpVisible' class='details'>\n          <div class='row'>\n            <div class='label'>Path length:</div>\n            <div class='col'>{{stats.pathLength}}</div>\n          </div>\n          <div class='row'>\n            <div class='label'>Path finder:</div>\n            <select class='col' v-model='pathFinder.selected' @change='updateSearchAlgorithm'>\n              <option v-for='algorithm in pathFinder.algorithms' :value='algorithm.value'>{{algorithm.name}}</option>\n            </select>\n          </div>\n        </div>\n      </div>\n      <div class='graph-name' v-if='!progress.visible' :title='graphNameTitle'>\n          <select class='col' v-model='graphSettings.selected' @change='updateGraph'>\n            <option v-for='graph in graphSettings.graphs' :value='graph.value'>{{graph.name}}</option>\n          </select>\n      </div>\n    </div>\n    <div class='about-line'>\n      <a class='about-link' href='#' @click.prevent='aboutVisible = true'>about...</a>\n      <a class='bold' href='http://github.com/anvaka/ngraph.path'>source code</a>\n    </div>\n    <div class='osm-note' v-if='!progress.visible && graphSettings.selected !== \"USA-road-d.NY\"'>\n      Graph was extracted from <a href='https://www.openstreetmap.org' target='_blank'>www.openstreetmap.org</a>.\n      It is made available under <a href='https://opendatacommons.org/licenses/odbl/summary/' target='_blank'>ODbL</a>\n    </div>\n    <about v-if='aboutVisible' @close='aboutVisible = false'></about>\n  </div>\n</template>\n\n<script>\nimport api from './appModel';\nimport SVGContainer from './SVGContainer';\nimport RoutePoint from './components/RoutePoint';\nimport About from './components/About';\n\nconst bus = require('./bus');\nconst wgl = require('w-gl');\n\nexport default {\n  name: 'app',\n  components: {\n    RoutePoint,\n    About\n  },\n  mounted() {\n    this.webGLEnabled = wgl.isWebGLEnabled(this.$refs.canvas);\n    if (!this.webGLEnabled) {\n      // TODO: Maybe render something smaller with SVG?\n      return;\n    }\n\n    api.loadPositions()\n    bus.on('graph-loaded', this.createScene, this);\n  },\n  beforeDestroy() {\n    bus.off('graph-loaded', this.createScene);\n    this.ensurePreviousSceneDestroyed();\n  },\n  data() {\n    return {\n      webGLEnabled: true,\n      loaded: false,\n      detailsVisible: false,\n      progress: api.progress,\n      routeStart: api.routeStart,\n      routeEnd: api.routeEnd,\n      stats: api.stats,\n      scale: 1,\n      pathInfo: api.pathInfo,\n      pathFinder: api.pathFinderSettings,\n      graphSettings: api.graphSettings,\n      aboutVisible: false\n    }\n  },\n  computed: {\n    graphNameTitle() {\n      let stats = this.stats;\n      if (!stats) return '';\n\n      return stats.graphNodeCount + ' nodes; ' + stats.graphLinksCount + ' edges';\n    },\n    helpVisible() {\n      return !(this.routeStart.visible && this.routeEnd.visible);\n    },\n    pathText() {\n      if (this.pathInfo.noPath) {\n        return 'No path (' + this.stats.lastSearchTook + ')';\n      }\n      return 'Found in: ' + this.stats.lastSearchTook;\n    }\n  },\n\n  methods: {\n    clearRoute() {\n      api.clearRoute();\n    },\n    getHelpText() {\n      if (!this.routeStart.visible) {\n        return 'Click anywhere to select starting point';\n      } else if (!this.routeEnd.visible) {\n        return 'Click anywhere to select destination';\n      }\n    },\n\n    ensurePreviousSceneDestroyed() {\n      if (this.scene) {\n        this.scene.dispose();\n        this.scene = null;\n      }\n      if (this.unsubscribeMoveEvents) {\n        this.unsubscribeMoveEvents();\n        this.unsubscribeMoveEvents = null;\n      }\n    },\n\n    createScene() {\n      this.ensurePreviousSceneDestroyed();\n\n      let canvas = this.$refs.canvas;\n      this.loaded = true;\n\n      this.scene = wgl.scene(canvas);\n      // this.scene.setPixelRatio(2);\n      let scene = this.scene;\n      let svgConntainer = new SVGContainer(this.$refs.svg.querySelector('.scene'), this.updateSVGElements.bind(this));\n      this.scene.appendChild(svgConntainer)\n      scene.setClearColor(12/255, 41/255, 82/255, 1)\n      //scene.setClearColor(1, 1, 1, 1)\n\n      let bbox = api.getGraphBBox();\n      let initialSceneSize = bbox.width/8;\n      scene.setViewBox({\n        left:  -initialSceneSize,\n        top:   -initialSceneSize,\n        right:  initialSceneSize,\n        bottom: initialSceneSize,\n      })\n\n      let graph = api.getGraph();\n\n      let linksCount = graph.getLinksCount();\n      let lines = new wgl.WireCollection(linksCount);\n      lines.color = {r: 0.8, g: 0.8, b: 0.8, a: 0.7}\n      // lines.color = {r: 0.1, g: 0.1, b: 0.1, a: 0.9}\n      graph.forEachLink(function (link) {\n        let from = graph.getNode(link.fromId).data;\n        let to = graph.getNode(link.toId).data\n\n        lines.add({ from, to });\n      });\n\n      scene.appendChild(lines);\n\n      scene.on('mousemove', this.onMouseMoveOverScene, this);\n      scene.on('click', this.onSceneClick, this);\n\n      let boundMouseDown = this.handleMouseDown.bind(this);\n      document.body.addEventListener('mousedown', boundMouseDown, true);\n      document.body.addEventListener('touchstart', boundMouseDown, true);\n\n      this.unsubscribeMoveEvents = function() {\n        document.body.removeEventListener('mousedown', boundMouseDown, true);\n        document.body.removeEventListener('touchstart', boundMouseDown, true);\n      }\n    },\n\n    updateSVGElements(svgConntainer) {\n      let strokeWidth = 6/svgConntainer.scale;\n      this.$refs.foundPath.setAttributeNS(null, 'stroke-width', strokeWidth + 'px');\n      this.scale = svgConntainer.scale / this.scene.getPixelRatio();\n    },\n\n    handleMouseDown(e) {\n      var s;\n      var touchId = undefined;\n      if (e.touches) {\n        let mainTouch = (e.changedTouches || e.touches)[0];\n        s = this.scene.getSceneCoordinate(mainTouch.clientX, mainTouch.clientY);\n        touchId = mainTouch.identifier;\n      } else {\n        s = this.scene.getSceneCoordinate(e.clientX, e.clientY);\n      }\n\n      let handleUnderCursor = api.getRouteHandleUnderCursor({\n        sceneX: s.x,\n        sceneY: s.y\n      }, this.scene);\n      if (handleUnderCursor) {\n        e.stopPropagation()\n        e.preventDefault()\n        handleUnderCursor.startDragging(this.scene, touchId);\n        return;\n      }\n    },\n\n    updateGraph() {\n      this.ensurePreviousSceneDestroyed();\n      setTimeout(() => {\n        api.updateSelectedGraph();\n      }, 0);\n    },\n\n    updateSearchAlgorithm() {\n      api.updateSearchAlgorithm();\n    },\n\n    onSceneClick(e) {\n      api.handleSceneClick(e);\n    },\n\n    onMouseMoveOverScene(e) {\n      let now = new Date();\n      let handle = api.getRouteHandleUnderCursor(e, this.scene);\n      if (handle !== this.prevHandle) {\n        this.$refs.canvas.style.cursor = handle ? 'pointer' : ''\n        this.prevHandle = handle;\n      }\n    },\n  }\n}\n</script>\n\n<style lang='stylus'>\n.absolute {\n  position: absolute;\n}\n\ncanvas {\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n}\n.progress {\n  color: white;\n  padding: 0 14px;\n  font-size: 24px;\n}\n\n.center {\n  display: flex;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  justify-content: center;\n  align-items: center;\n  text-align: center;\n}\n\n.no-webgl {\n  width: 100%;\n  color: hsla(215, 37%, 55%, 1);\n  flex-direction: column;\n  text-align: center;\n  padding: 12px;\n\n  .video-demo {\n    margin-top: 20px;\n    width: 853px;\n    height: 480px;\n  }\n\n  h4 {\n    margin: 7px 0;\n    font-size: 24px;\n  }\n}\n\n.controls {\n  width: 440px;\n  top: 0;\n  margin: 14px;\n  display: flex;\n  flex-direction: column;\n  background-color: hsla(215, 74%, 18%, 1);\n  color: hsla(215, 37%, 55%, 1);\n  border: 1px solid hsla(215, 37%, 55%, 1);\n}\n\n.actions {\n  height: 40px;\n  display: flex;\n  flex-direction: row;\n}\n.help {\n  height: 40px;\n  padding:10px;\n  text-align: center;\n  font-size: 14px;\n  color: white;\n}\n.direction-switch {\n  display: flex;\n  height: 100%;\n  flex: 1;\n  align-items: center;\n  justify-content: center;\n}\n\na {\n  text-decoration: none;\n}\n\na.direction-switch {\n  color: hsla(215, 37%, 55%, 1);\n}\na.highlighted {\n  color: white;\n  border-bottom: 1px dashed white;\n}\n.stats {\n  padding: 4px;\n  position: absolute;\n  background-color: hsla(215, 74%, 18%, 1);\n  margin: 14px;\n  bottom: 0;\n  font-size: 12px;\n  color: hsla(215, 37%, 55%, 1);\n}\n\n.bold {\n  color: hsla(215, 37%, 85%, 1);\n}\n\n.row {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: baseline;\n  height: 32px;\n}\n.col {\n  flex: 1\n}\n\n.details {\n  padding: 8px 14px;\n}\n\nselect {\n  background: transparent;\n  border: none;\n  color: hsla(215, 37%, 85%, 1);\n  appearance: none;\n  font-size: 14px;\n  border-bottom: 1px dashed;\n  border-radius: 0;\n  padding-bottom: 4px;\n}\n\noption {\n  color: black;\n}\n\nsvg text {\n  pointer-events: none;\n  user-select: none;\n}\nselect:focus {\n  outline: none;\n}\n\n.about-line {\n  display: flex;\n  position: absolute;\n  width: 350px;\n  left: 50%;\n  bottom: 0;\n  padding: 7px 12px;\n  background-color: hsla(215, 74%, 18%, 0.8);\n  transform: translateX(-50%);\n  a {\n    flex: 1;\n    text-align: center;\n  }\n}\n\na.about-link {\n    color: hsla(215, 37%, 85%, 1);\n    font-size: 16px;\n}\n\n.graph-name {\n  position: absolute;\n  bottom: 42px;\n  left: 50%;\n  transform: translateX(-50%);\n  background-color: hsla(215, 74%, 18%, 0.8);\n  padding: 0 10px;\n  select {\n    font-size: 24px;\n    cursor: pointer;\n  }\n}\n\n.osm-note {\n    position: absolute;\n    color: #6285b7;\n    width: 290px;\n    background-color: hsla(215, 74%, 18%, 0.8);\n    font-size: 11px;\n    text-align: right;\n    top: 14px;\n    right: 14px;\n    a {\n      color: #6285b7;\n    }\n}\n\n@media (max-width: 800px) {\n  .osm-note {\n    // The screen size is too small for this. Visitors can read it\n    // in the about page.\n    display: none;\n  }\n  .progress {\n    font-size: 18px;\n  }\n  .about-line {\n    width: 100%;\n    bottom: 0;\n  }\n\n  .details {\n    padding: 5px;\n  }\n  .controls {\n    width: 100%;\n    margin: 0;\n  }\n  .stats {\n    margin: 0;\n    bottom: 0px;\n    top: auto;\n  }\n\n  a.about-link {\n    bottom: 0;\n    padding-bottom: 4px;\n  }\n\n  .no-webgl {\n    .video-demo {\n      width: 560px;\n      height: 315px;\n    }\n  }\n\n  .direction-switch {\n    font-size: 14px;\n  }\n}\n\n@media (max-width: 600px) {\n  .no-webgl {\n    padding: 0;\n    div {\n      padding: 7px;\n    }\n    .video-demo {\n      width: 100%;\n      height: 300px;\n    }\n  }\n  .graph-name {\n    bottom: 48px;\n    select {\n      font-size: 16px;\n    }\n  }\n}\n\nsvg.svg-overlay {\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  background: transparent;\n}\n\n.route-info-container {\n  display: flex;\n}\n\nsvg.route-info {\n  flex: 1;\n  height: 40px;\n  cursor: pointer;\n  width: 100%;\n  margin-left: 7px;\n}\n\na.reset {\n  color: hsla(215, 37%, 85%, 1);\n  font-size: small;\n  padding: 0 10px;\n  display: block;\n  height: 40px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n\n.label {\n  width: 100px;\n  flex-shrink: 0;\n  padding-right: 7px;\n}\n.no-pointer {\n  pointer-events: none;\n}\n\n.error {\n  color:deeppink;\n}\n.error-details {\n  font-family: monospace;\n  text-align: left;\n}\n\na::selection,\nh3::selection,\nh4::selection,\ndiv::selection,\np::selection {\n  background: #d03094;\n  color: white;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// App.vue?6a0b0224"],"sourceRoot":""}